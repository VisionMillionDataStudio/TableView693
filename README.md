# é¤å…·ä¸é£Ÿå“æ£€æµ‹æ£€æµ‹ç³»ç»Ÿæºç åˆ†äº«
 # [ä¸€æ¡é¾™æ•™å­¦YOLOV8æ ‡æ³¨å¥½çš„æ•°æ®é›†ä¸€é”®è®­ç»ƒ_70+å…¨å¥—æ”¹è¿›åˆ›æ–°ç‚¹å‘åˆŠ_Webå‰ç«¯å±•ç¤º]

### 1.ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

é¡¹ç›®å‚è€ƒ[AAAI Association for the Advancement of Artificial Intelligence](https://gitee.com/qunmasj/projects)

é¡¹ç›®æ¥æº[AACV Association for the Advancement of Computer Vision](https://kdocs.cn/l/cszuIiCKVNis)

ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

éšç€ç¤¾ä¼šç»æµçš„å¿«é€Ÿå‘å±•å’Œäººä»¬ç”Ÿæ´»æ°´å¹³çš„æé«˜ï¼Œé¤é¥®è¡Œä¸šçš„è“¬å‹ƒå‘å±•ä½¿å¾—é£Ÿå“å®‰å…¨å’Œé¤å…·ç®¡ç†æˆä¸ºäº†å…¬ä¼—å…³æ³¨çš„ç„¦ç‚¹ã€‚é¤é¥®æœåŠ¡çš„è´¨é‡ä¸ä»…ç›´æ¥å½±å“æ¶ˆè´¹è€…çš„ç”¨é¤ä½“éªŒï¼Œä¹Ÿå…³ç³»åˆ°é£Ÿå“å®‰å…¨ã€å«ç”Ÿå’Œç¯å¢ƒä¿æŠ¤ç­‰å¤šæ–¹é¢çš„é—®é¢˜ã€‚å› æ­¤ï¼Œæ„å»ºä¸€ä¸ªé«˜æ•ˆã€æ™ºèƒ½çš„é¤å…·ä¸é£Ÿå“æ£€æµ‹ç³»ç»Ÿæ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚è¿‘å¹´æ¥ï¼Œè®¡ç®—æœºè§†è§‰æŠ€æœ¯çš„è¿…çŒ›å‘å±•ä¸ºè¿™ä¸€é¢†åŸŸæä¾›äº†æ–°çš„è§£å†³æ–¹æ¡ˆï¼Œå°¤å…¶æ˜¯åŸºäºæ·±åº¦å­¦ä¹ çš„ç›®æ ‡æ£€æµ‹æŠ€æœ¯ï¼Œå¦‚YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—æ¨¡å‹ï¼Œå› å…¶é«˜æ•ˆæ€§å’Œå‡†ç¡®æ€§è€Œå—åˆ°å¹¿æ³›å…³æ³¨ã€‚

YOLOv8ä½œä¸ºYOLOç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå…·å¤‡äº†æ›´å¼ºçš„å®æ—¶æ£€æµ‹èƒ½åŠ›å’Œæ›´é«˜çš„æ£€æµ‹ç²¾åº¦ï¼Œé€‚ç”¨äºå¤šç§å¤æ‚åœºæ™¯çš„ç›®æ ‡è¯†åˆ«ä»»åŠ¡ã€‚åœ¨é¤é¥®è¡Œä¸šä¸­ï¼Œåº”ç”¨YOLOv8è¿›è¡Œé¤å…·ä¸é£Ÿå“çš„æ£€æµ‹ï¼Œä¸ä»…å¯ä»¥æå‡é¤å…çš„è¿è¥æ•ˆç‡ï¼Œè¿˜èƒ½æœ‰æ•ˆå‡å°‘äººä¸ºé”™è¯¯ï¼Œæé«˜é£Ÿå“å®‰å…¨ç®¡ç†æ°´å¹³ã€‚æœ¬ç ”ç©¶æ—¨åœ¨åŸºäºæ”¹è¿›çš„YOLOv8æ¨¡å‹ï¼Œå¼€å‘ä¸€ä¸ªé«˜æ•ˆçš„é¤å…·ä¸é£Ÿå“æ£€æµ‹ç³»ç»Ÿï¼Œä»¥å®ç°å¯¹é¤é¥®ç¯å¢ƒä¸­å„ç±»ç‰©å“çš„æ™ºèƒ½è¯†åˆ«å’Œç®¡ç†ã€‚

æœ¬ç ”ç©¶æ‰€ä½¿ç”¨çš„æ•°æ®é›†åŒ…å«2990å¼ å›¾åƒï¼Œæ¶µç›–äº†36ä¸ªç±»åˆ«çš„ç‰©å“ï¼ŒåŒ…æ‹¬é¤å…·ï¼ˆå¦‚åˆ€ã€å‰ã€å‹ºã€æ¯ã€ç›˜ç­‰ï¼‰å’Œé£Ÿå“ï¼ˆå¦‚å„ç±»èœè‚´ã€é¥®æ–™ç­‰ï¼‰ï¼Œä»¥åŠä¸é¤é¥®ç¯å¢ƒç›¸å…³çš„å…¶ä»–ç‰©å“ï¼ˆå¦‚èœå•ã€æœåŠ¡å‘˜ã€æ¡Œå­ç­‰ï¼‰ã€‚è¿™ä¸€ä¸°å¯Œçš„æ•°æ®é›†ä¸ºæ¨¡å‹çš„è®­ç»ƒå’Œè¯„ä¼°æä¾›äº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡å¯¹è¿™äº›ç±»åˆ«çš„ç»†è‡´åˆ’åˆ†å’Œå‡†ç¡®æ ‡æ³¨ï¼Œç ”ç©¶å°†èƒ½å¤Ÿå®ç°å¯¹é¤é¥®ç¯å¢ƒä¸­å„ç±»ç‰©å“çš„ç²¾å‡†è¯†åˆ«ï¼Œä»è€Œä¸ºåç»­çš„æ™ºèƒ½ç®¡ç†æä¾›æ•°æ®æ”¯æŒã€‚

åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒåŸºäºæ”¹è¿›YOLOv8çš„æ£€æµ‹ç³»ç»Ÿå¯ä»¥å¸®åŠ©é¤å…å®ç°è‡ªåŠ¨åŒ–çš„ç‰©å“è¯†åˆ«ä¸ç®¡ç†ã€‚ä¾‹å¦‚ï¼Œç³»ç»Ÿå¯ä»¥å®æ—¶ç›‘æµ‹é¤æ¡Œä¸Šçš„é¤å…·å’Œé£Ÿå“ï¼ŒåŠæ—¶æé†’æœåŠ¡å‘˜è¡¥å……ç¼ºå¤±çš„ç‰©å“ï¼Œå‡å°‘é¡¾å®¢ç­‰å¾…æ—¶é—´ï¼Œæé«˜æœåŠ¡è´¨é‡ã€‚æ­¤å¤–ï¼Œç³»ç»Ÿè¿˜å¯ä»¥é€šè¿‡å¯¹é¤å…·å’Œé£Ÿå“çš„æ£€æµ‹ï¼Œè‡ªåŠ¨ç”Ÿæˆç”¨é¤æ•°æ®æŠ¥å‘Šï¼Œä¸ºé¤å…çš„è¿è¥å†³ç­–æä¾›æ•°æ®æ”¯æŒã€‚è¿™ç§æ™ºèƒ½åŒ–çš„ç®¡ç†æ–¹å¼ä¸ä»…æé«˜äº†é¤å…çš„è¿è¥æ•ˆç‡ï¼Œä¹Ÿä¸ºé¡¾å®¢æä¾›äº†æ›´ä¸ºä¼˜è´¨çš„ç”¨é¤ä½“éªŒã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒåŸºäºæ”¹è¿›YOLOv8çš„é¤å…·ä¸é£Ÿå“æ£€æµ‹ç³»ç»Ÿçš„ç ”ç©¶ï¼Œä¸ä»…å…·æœ‰é‡è¦çš„ç†è®ºæ„ä¹‰ï¼Œä¹Ÿå…·å¤‡å¹¿æ³›çš„å®é™…åº”ç”¨ä»·å€¼ã€‚é€šè¿‡è¯¥ç³»ç»Ÿçš„å¼€å‘ä¸åº”ç”¨ï¼Œå¯ä»¥æœ‰æ•ˆæå‡é¤é¥®è¡Œä¸šçš„ç®¡ç†æ°´å¹³ï¼Œæ¨åŠ¨é¤é¥®æœåŠ¡çš„æ™ºèƒ½åŒ–è¿›ç¨‹ï¼Œæœ€ç»ˆå®ç°é£Ÿå“å®‰å…¨ä¸é¡¾å®¢æ»¡æ„åº¦çš„åŒé‡æå‡ã€‚å› æ­¤ï¼Œæœ¬ç ”ç©¶çš„å¼€å±•å…·æœ‰é‡è¦çš„å­¦æœ¯ä»·å€¼å’Œç¤¾ä¼šæ„ä¹‰ï¼ŒæœŸå¾…èƒ½å¤Ÿä¸ºé¤é¥®è¡Œä¸šçš„æ™ºèƒ½åŒ–è½¬å‹æä¾›æœ‰åŠ›çš„æŠ€æœ¯æ”¯æŒã€‚

### 2.å›¾ç‰‡æ¼”ç¤º

![1.png](1.png)

![2.png](2.png)

![3.png](3.png)

##### æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ2.å›¾ç‰‡æ¼”ç¤ºâ€å’Œâ€œ3.è§†é¢‘æ¼”ç¤ºâ€å±•ç¤ºçš„ç³»ç»Ÿå›¾ç‰‡æˆ–è€…è§†é¢‘å¯èƒ½ä¸ºè€ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬åœ¨è€ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå‡çº§å¦‚ä¸‹ï¼šï¼ˆå®é™…æ•ˆæœä»¥å‡çº§çš„æ–°ç‰ˆæœ¬ä¸ºå‡†ï¼‰

  ï¼ˆ1ï¼‰é€‚é…äº†YOLOV8çš„â€œç›®æ ‡æ£€æµ‹â€æ¨¡å‹å’Œâ€œå®ä¾‹åˆ†å‰²â€æ¨¡å‹ï¼Œé€šè¿‡åŠ è½½ç›¸åº”çš„æƒé‡ï¼ˆ.ptï¼‰æ–‡ä»¶å³å¯è‡ªé€‚åº”åŠ è½½æ¨¡å‹ã€‚

  ï¼ˆ2ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«æ¨¡å¼ã€‚

  ï¼ˆ3ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«ç»“æœä¿å­˜å¯¼å‡ºï¼Œè§£å†³æ‰‹åŠ¨å¯¼å‡ºï¼ˆå®¹æ˜“å¡é¡¿å‡ºç°çˆ†å†…å­˜ï¼‰å­˜åœ¨çš„é—®é¢˜ï¼Œè¯†åˆ«å®Œè‡ªåŠ¨ä¿å­˜ç»“æœå¹¶å¯¼å‡ºåˆ°tempDirä¸­ã€‚

  ï¼ˆ4ï¼‰æ”¯æŒWebå‰ç«¯ç³»ç»Ÿä¸­çš„æ ‡é¢˜ã€èƒŒæ™¯å›¾ç­‰è‡ªå®šä¹‰ä¿®æ”¹ï¼Œåé¢æä¾›ä¿®æ”¹æ•™ç¨‹ã€‚

  å¦å¤–æœ¬é¡¹ç›®æä¾›è®­ç»ƒçš„æ•°æ®é›†å’Œè®­ç»ƒæ•™ç¨‹,æš‚ä¸æä¾›æƒé‡æ–‡ä»¶ï¼ˆbest.ptï¼‰,éœ€è¦æ‚¨æŒ‰ç…§æ•™ç¨‹è¿›è¡Œè®­ç»ƒåå®ç°å›¾ç‰‡æ¼”ç¤ºå’ŒWebå‰ç«¯ç•Œé¢æ¼”ç¤ºçš„æ•ˆæœã€‚

### 3.è§†é¢‘æ¼”ç¤º

[3.1 è§†é¢‘æ¼”ç¤º](https://www.bilibili.com/video/BV14ps6e2Ex7/)

### 4.æ•°æ®é›†ä¿¡æ¯å±•ç¤º

##### 4.1 æœ¬é¡¹ç›®æ•°æ®é›†è¯¦ç»†æ•°æ®ï¼ˆç±»åˆ«æ•°ï¼†ç±»åˆ«åï¼‰

nc: 36
names: ['QR code', 'bag', 'bag with straw', 'basket of food', 'beer mug', 'blue QR code', 'bottle', 'bowl of food', 'chopstick', 'cook', 'cup', 'dish', 'fork', 'glass', 'jug', 'knife', 'masa', 'menu', 'mobile', 'napkin', 'om', 'pan of food', 'people', 'pepper', 'plate of food', 'plato', 'salt', 'scaun', 'soda can', 'spoon', 'table', 'tablou', 'tray of food', 'vase with flower', 'waiter', 'wine glass']


##### 4.2 æœ¬é¡¹ç›®æ•°æ®é›†ä¿¡æ¯ä»‹ç»

æ•°æ®é›†ä¿¡æ¯å±•ç¤º

åœ¨æœ¬ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åä¸ºâ€œTableViewâ€çš„æ•°æ®é›†ï¼Œä»¥æ”¯æŒæ”¹è¿›YOLOv8çš„é¤å…·ä¸é£Ÿå“æ£€æµ‹ç³»ç»Ÿçš„è®­ç»ƒå’Œæµ‹è¯•ã€‚è¯¥æ•°æ®é›†åŒ…å«36ä¸ªç±»åˆ«ï¼Œæ¶µç›–äº†ä¸é¤é¥®ç¯å¢ƒå¯†åˆ‡ç›¸å…³çš„å„ç§ç‰©å“ï¼Œæ—¨åœ¨æé«˜æ¨¡å‹åœ¨å®é™…åº”ç”¨ä¸­çš„å‡†ç¡®æ€§å’Œé²æ£’æ€§ã€‚é€šè¿‡å¯¹è¿™äº›ç±»åˆ«çš„æ·±å…¥åˆ†æï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£æ•°æ®é›†çš„ç»“æ„å’Œæ½œåœ¨åº”ç”¨ã€‚

â€œTableViewâ€æ•°æ®é›†çš„ç±»åˆ«åŒ…æ‹¬ä»å¸¸è§çš„é¤å…·åˆ°é¥®å“å®¹å™¨ï¼Œå†åˆ°é¤é¥®åœºæ™¯ä¸­çš„äººå’Œç‰©å“ã€‚å…·ä½“è€Œè¨€ï¼Œæ•°æ®é›†ä¸­åŒ…å«çš„ç±»åˆ«æœ‰ï¼šQR codeã€bagã€bag with strawã€basket of foodã€beer mugã€blue QR codeã€bottleã€bowl of foodã€chopstickã€cookã€cupã€dishã€forkã€glassã€jugã€knifeã€masaã€menuã€mobileã€napkinã€omã€pan of foodã€peopleã€pepperã€plate of foodã€platoã€saltã€scaunã€soda canã€spoonã€tableã€tablouã€tray of foodã€vase with flowerã€waiterä»¥åŠwine glassã€‚è¿™äº›ç±»åˆ«ä¸ä»…æ¶µç›–äº†å„ç§é¤å…·å’Œé£Ÿå“ï¼Œè¿˜åŒ…æ‹¬ä¸ç”¨é¤ç¯å¢ƒç›¸å…³çš„å…ƒç´ ï¼Œå¦‚èœå•ã€æœåŠ¡å‘˜å’Œè£…é¥°ç‰©ï¼Œåæ˜ äº†çœŸå®ç”¨é¤åœºæ™¯çš„å¤æ‚æ€§ã€‚

åœ¨æ•°æ®é›†çš„æ„å»ºè¿‡ç¨‹ä¸­ï¼Œç ”ç©¶è€…ä»¬å¯¹æ¯ä¸ªç±»åˆ«è¿›è¡Œäº†ç»†è‡´çš„æ ‡æ³¨ï¼Œä»¥ç¡®ä¿æ¨¡å‹åœ¨è®­ç»ƒæ—¶èƒ½å¤Ÿå‡†ç¡®è¯†åˆ«å’Œåˆ†ç±»ã€‚è¿™ç§é«˜è´¨é‡çš„æ ‡æ³¨å¯¹äºYOLOv8æ¨¡å‹çš„è®­ç»ƒè‡³å…³é‡è¦ï¼Œå› ä¸ºæ¨¡å‹çš„æ€§èƒ½åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–äºè®­ç»ƒæ•°æ®çš„è´¨é‡å’Œå¤šæ ·æ€§ã€‚é€šè¿‡å¼•å…¥å¤šæ ·åŒ–çš„æ ·æœ¬ï¼Œæ•°æ®é›†ä¸ä»…å¢å¼ºäº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œè¿˜æå‡äº†å…¶åœ¨ä¸åŒåœºæ™¯ä¸‹çš„åº”ç”¨æ½œåŠ›ã€‚

æ­¤å¤–ï¼Œæ•°æ®é›†ä¸­çš„â€œpeopleâ€ç±»åˆ«ä¸ºæ¨¡å‹æä¾›äº†å¯¹åŠ¨æ€ç¯å¢ƒçš„ç†è§£ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨è¯†åˆ«é¤å…·å’Œé£Ÿå“çš„åŒæ—¶ï¼Œè€ƒè™‘åˆ°äººç±»æ´»åŠ¨çš„å½±å“ã€‚è¿™ä¸€ç‰¹æ€§å¯¹äºå¼€å‘æ™ºèƒ½é¤é¥®ç³»ç»Ÿå°¤ä¸ºé‡è¦ï¼Œå› ä¸ºåœ¨å®é™…ç”¨é¤åœºæ™¯ä¸­ï¼Œäººä¸ç‰©å“ä¹‹é—´çš„äº¤äº’é¢‘ç¹ä¸”å¤æ‚ã€‚é€šè¿‡å¯¹è¿™äº›äº¤äº’çš„å­¦ä¹ ï¼Œæ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”ä¸åŒçš„ç”¨é¤ç¯å¢ƒï¼Œä»è€Œæé«˜å…¶åœ¨å®é™…åº”ç”¨ä¸­çš„å®ç”¨æ€§ã€‚

â€œTableViewâ€æ•°æ®é›†çš„å¤šæ ·æ€§å’Œä¸°å¯Œæ€§ä¸ºæ”¹è¿›YOLOv8çš„é¤å…·ä¸é£Ÿå“æ£€æµ‹ç³»ç»Ÿæä¾›äº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡å¯¹å„ç±»ç‰©å“çš„æ·±å…¥å­¦ä¹ ï¼Œæ¨¡å‹ä¸ä»…èƒ½å¤Ÿå®ç°é«˜æ•ˆçš„ç‰©ä½“æ£€æµ‹ï¼Œè¿˜èƒ½åœ¨è¯†åˆ«è¿‡ç¨‹ä¸­è€ƒè™‘åˆ°ç¯å¢ƒçš„å˜åŒ–å’Œäººç±»è¡Œä¸ºçš„å½±å“ã€‚è¿™ç§ç»¼åˆèƒ½åŠ›å°†æå¤§åœ°æ¨åŠ¨æ™ºèƒ½é¤é¥®ç³»ç»Ÿçš„å‘å±•ï¼Œä½¿å…¶åœ¨å®é™…åº”ç”¨ä¸­æ›´å…·å®ç”¨æ€§å’Œçµæ´»æ€§ã€‚

æ€»ä¹‹ï¼Œâ€œTableViewâ€æ•°æ®é›†çš„æ„å»ºå’Œåº”ç”¨ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œä»¥æ”¯æŒé¤å…·ä¸é£Ÿå“æ£€æµ‹ç³»ç»Ÿçš„ç ”ç©¶ä¸å¼€å‘ã€‚é€šè¿‡å¯¹36ä¸ªç±»åˆ«çš„å…¨é¢åˆ†æå’Œé«˜è´¨é‡çš„æ ‡æ³¨ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç¡®ä¿æ¨¡å‹åœ¨å„ç§å¤æ‚ç¯å¢ƒä¸­çš„è¡¨ç°ï¼Œä»è€Œä¸ºæœªæ¥çš„æ™ºèƒ½é¤é¥®è§£å†³æ–¹æ¡ˆå¥ å®šåŸºç¡€ã€‚éšç€æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥å’Œæ•°æ®é›†çš„ä¸æ–­å®Œå–„ï¼Œæˆ‘ä»¬æœŸå¾…â€œTableViewâ€èƒ½å¤Ÿåœ¨é¤é¥®è¡Œä¸šçš„æ•°å­—åŒ–è½¬å‹ä¸­å‘æŒ¥é‡è¦ä½œç”¨ã€‚

![4.png](4.png)

![5.png](5.png)

![6.png](6.png)

![7.png](7.png)

![8.png](8.png)

### 5.å…¨å¥—é¡¹ç›®ç¯å¢ƒéƒ¨ç½²è§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰

[5.1 ç¯å¢ƒéƒ¨ç½²æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404473917358506534?logTag=c807d0cbc21c0ef59de5)




[5.2 å®‰è£…Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºå’Œä¾èµ–åº“å®‰è£…è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404474678003106304?logTag=1f1041108cd1f708b01a)

### 6.æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰

[6.1 æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰](https://www.ixigua.com/7404477157818401292?logTag=d31a2dfd1983c9668658)

### 7.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰

[7.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰](https://www.ixigua.com/7404478314661806627?logTag=29066f8288e3f4eea3a4)

### 8.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£ï¼ˆéç§‘ç­ä¹Ÿå¯ä»¥è½»æ¾å†™åˆŠå‘åˆŠï¼ŒV10ç‰ˆæœ¬æ­£åœ¨ç§‘ç ”å¾…æ›´æ–°ï¼‰

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæ¯ä¸ªåˆ›æ–°ç‚¹çš„å…·ä½“åŸç†è®²è§£å°±ä¸ä¸€ä¸€å±•å¼€ï¼Œå…·ä½“è§ä¸‹åˆ—ç½‘å€ä¸­çš„åˆ›æ–°ç‚¹å¯¹åº”å­é¡¹ç›®çš„æŠ€æœ¯åŸç†åšå®¢ç½‘å€ã€Blogã€‘ï¼š

![9.png](9.png)

[8.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£é“¾æ¥](https://gitee.com/qunmasj/good)

### 9.ç³»ç»ŸåŠŸèƒ½å±•ç¤ºï¼ˆæ£€æµ‹å¯¹è±¡ä¸ºä¸¾ä¾‹ï¼Œå®é™…å†…å®¹ä»¥æœ¬é¡¹ç›®æ•°æ®é›†ä¸ºå‡†ï¼‰

å›¾9.1.ç³»ç»Ÿæ”¯æŒæ£€æµ‹ç»“æœè¡¨æ ¼æ˜¾ç¤º

  å›¾9.2.ç³»ç»Ÿæ”¯æŒç½®ä¿¡åº¦å’ŒIOUé˜ˆå€¼æ‰‹åŠ¨è°ƒèŠ‚

  å›¾9.3.ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰åŠ è½½æƒé‡æ–‡ä»¶best.pt(éœ€è¦ä½ é€šè¿‡æ­¥éª¤5ä¸­è®­ç»ƒè·å¾—)

  å›¾9.4.ç³»ç»Ÿæ”¯æŒæ‘„åƒå¤´å®æ—¶è¯†åˆ«

  å›¾9.5.ç³»ç»Ÿæ”¯æŒå›¾ç‰‡è¯†åˆ«

  å›¾9.6.ç³»ç»Ÿæ”¯æŒè§†é¢‘è¯†åˆ«

  å›¾9.7.ç³»ç»Ÿæ”¯æŒè¯†åˆ«ç»“æœæ–‡ä»¶è‡ªåŠ¨ä¿å­˜

  å›¾9.8.ç³»ç»Ÿæ”¯æŒExcelå¯¼å‡ºæ£€æµ‹ç»“æœæ•°æ®

![10.png](10.png)

![11.png](11.png)

![12.png](12.png)

![13.png](13.png)

![14.png](14.png)

![15.png](15.png)

![16.png](16.png)

![17.png](17.png)

### 10.åŸå§‹YOLOV8ç®—æ³•åŸç†

åŸå§‹YOLOv8ç®—æ³•åŸç†

YOLOv8æ˜¯ç”±Ultralyticså…¬å¸äº2023å¹´æ¨å‡ºçš„æœ€æ–°ä¸€ä»£YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—ç›®æ ‡æ£€æµ‹ç®—æ³•ã€‚ä½œä¸ºYOLOç³»åˆ—çš„ç¬¬å…«ä¸ªç‰ˆæœ¬ï¼ŒYOLOv8åœ¨è®¾è®¡ä¸Šå……åˆ†è€ƒè™‘äº†é€Ÿåº¦ã€ç²¾åº¦å’Œæ˜“ç”¨æ€§ç­‰å¤šæ–¹é¢çš„éœ€æ±‚ï¼Œæ—¨åœ¨ä¸ºè®¡ç®—æœºè§†è§‰é¢†åŸŸæä¾›æ›´ä¸ºé«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚YOLOv8çš„æ¶æ„ç”±ä¸‰ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆï¼šBackboneï¼ˆéª¨å¹²ç½‘ç»œï¼‰ã€Neckï¼ˆé¢ˆéƒ¨ç»“æ„ï¼‰å’ŒHeadï¼ˆå¤´éƒ¨ç»“æ„ï¼‰ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªéƒ¨åˆ†éƒ½è¿›è¡Œäº†åˆ›æ–°å’Œä¼˜åŒ–ã€‚

åœ¨Backboneéƒ¨åˆ†ï¼ŒYOLOv8nç‰ˆæœ¬é‡‡ç”¨äº†CSPï¼ˆCross Stage Partialï¼‰ç»“æ„æ¥å®ç°ç‰¹å¾æå–ã€‚CSPç»“æ„çš„è®¾è®¡ç†å¿µæ˜¯å°†ç‰¹å¾æå–è¿‡ç¨‹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«è¿›è¡Œå·ç§¯å’Œè¿æ¥ï¼Œè¿™ç§åˆ†ç¦»çš„æ–¹å¼èƒ½å¤Ÿæœ‰æ•ˆå‡è½»ç½‘ç»œçš„è®¡ç®—è´Ÿæ‹…ï¼Œå¹¶æé«˜ç‰¹å¾çš„è¡¨è¾¾èƒ½åŠ›ã€‚é€šè¿‡è¿™ç§ç»“æ„ï¼ŒYOLOv8èƒ½å¤Ÿåœ¨ä¿æŒé«˜æ•ˆçš„åŒæ—¶ï¼Œæå–å‡ºæ›´ä¸ºä¸°å¯Œçš„ç‰¹å¾ä¿¡æ¯ã€‚æ­¤å¤–ï¼ŒYOLOv8nè¿˜å¼•å…¥äº†C2fæ¨¡å—æ¥æ›¿ä»£YOLOv5ä¸­çš„C3æ¨¡å—ï¼Œè¿›ä¸€æ­¥æå‡äº†ç‰¹å¾æå–çš„æ•ˆç‡å’Œæ•ˆæœã€‚C2fæ¨¡å—é€šè¿‡æ›´ä¸ºçµæ´»çš„ç‰¹å¾èåˆç­–ç•¥ï¼Œä½¿å¾—ç½‘ç»œèƒ½å¤Ÿæ›´å¥½åœ°æ•æ‰åˆ°ç›®æ ‡çš„å¤šæ ·æ€§å’Œå¤æ‚æ€§ã€‚

åœ¨Neckéƒ¨åˆ†ï¼ŒYOLOv8é‡‡ç”¨äº†PAN-FPNï¼ˆPath Aggregation Network - Feature Pyramid Networkï¼‰ç»“æ„ï¼Œä»¥å®ç°ç‰¹å¾çš„å¤šå°ºåº¦èåˆã€‚PAN-FPNç»“æ„é€šè¿‡ä¸åŒå±‚æ¬¡çš„ç‰¹å¾è¿›è¡Œè¿æ¥ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæ•´åˆæ¥è‡ªä¸åŒå°ºåº¦çš„ä¿¡æ¯ï¼Œä»è€Œæé«˜ç›®æ ‡æ£€æµ‹çš„å‡†ç¡®æ€§ã€‚å°¤å…¶æ˜¯åœ¨å¤„ç†å°ç›®æ ‡æ—¶ï¼ŒPAN-FPNçš„ä¼˜åŠ¿å°¤ä¸ºæ˜æ˜¾ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿå……åˆ†åˆ©ç”¨é«˜åˆ†è¾¨ç‡çš„ç‰¹å¾ä¿¡æ¯æ¥æå‡å°ç›®æ ‡çš„æ£€æµ‹èƒ½åŠ›ã€‚

YOLOv8çš„Headéƒ¨åˆ†åˆ™é‡‡ç”¨äº†Anchor-Freeçš„æ£€æµ‹æ–¹å¼ï¼Œæ‘’å¼ƒäº†ä¼ ç»ŸYOLOç‰ˆæœ¬ä¸­ä¾èµ–äºé”šæ¡†çš„æ£€æµ‹ç­–ç•¥ã€‚è¿™ä¸€æ”¹å˜ä½¿å¾—YOLOv8åœ¨å¤„ç†ç›®æ ‡æ£€æµ‹æ—¶æ›´åŠ çµæ´»ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”ä¸åŒå½¢çŠ¶å’Œå°ºå¯¸çš„ç›®æ ‡ã€‚å…·ä½“æ¥è¯´ï¼ŒDetectæ¨¡å—ä½¿ç”¨äº†è§£è€¦å¤´ç»“æ„ï¼Œè¿™ç§ç»“æ„é€šè¿‡å°†ç›®æ ‡çš„åˆ†ç±»å’Œå›å½’ä»»åŠ¡åˆ†å¼€å¤„ç†ï¼Œè¿›ä¸€æ­¥æé«˜äº†æ£€æµ‹çš„ç²¾åº¦å’Œæ•ˆç‡ã€‚åŒæ—¶ï¼ŒYOLOv8å¼•å…¥äº†CloUæŸå¤±å‡½æ•°ï¼Œè¿™ä¸€æŸå¤±å‡½æ•°çš„è®¾è®¡æ—¨åœ¨æ›´å¥½åœ°ä¼˜åŒ–æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼Œå°¤å…¶æ˜¯åœ¨é¢å¯¹å¤æ‚åœºæ™¯å’Œå¤šç›®æ ‡æ£€æµ‹æ—¶ï¼ŒCloUæŸå¤±å‡½æ•°èƒ½å¤Ÿæœ‰æ•ˆå‡å°‘è¯¯æ£€å’Œæ¼æ£€çš„æƒ…å†µã€‚

YOLOv8çš„è®¾è®¡ä¸ä»…å…³æ³¨æ¨¡å‹çš„ç²¾åº¦å’Œé€Ÿåº¦ï¼Œè¿˜ç‰¹åˆ«è€ƒè™‘äº†ç”¨æˆ·çš„æ˜“ç”¨æ€§ã€‚å®ƒåŸç”Ÿæ”¯æŒè‡ªå®šä¹‰æ•°æ®é›†ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œè®­ç»ƒå’Œè°ƒæ•´ï¼Œè¿™ä½¿å¾—YOLOv8åœ¨å®é™…åº”ç”¨ä¸­æ›´åŠ çµæ´»ã€‚æ­¤å¤–ï¼ŒYOLOv8è¿˜æä¾›äº†å¤šç§ä¸åŒè§„æ¨¡çš„æ¨¡å‹ç‰ˆæœ¬ï¼Œå¦‚YOLOv8nã€YOLOv8sã€YOLOv8mç­‰ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®å…·ä½“çš„ç¡¬ä»¶æ¡ä»¶å’Œåº”ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„æ¨¡å‹ã€‚è¿™ç§å¤šæ ·åŒ–çš„é€‰æ‹©ä½¿å¾—YOLOv8èƒ½å¤Ÿåœ¨ä¸åŒçš„ç¯å¢ƒä¸­å‘æŒ¥æœ€ä½³æ€§èƒ½ã€‚

åœ¨æ¨¡å‹è®¾ç½®æ–¹é¢ï¼ŒYOLOv8æä¾›äº†depth_factorã€width_factorå’Œratioç­‰å‚æ•°ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è°ƒæ•´è¿™äº›å‚æ•°æ¥æ§åˆ¶æ¨¡å‹çš„æ·±åº¦ã€å®½åº¦å’Œé€šé“æ•°ã€‚å…·ä½“è€Œè¨€ï¼Œdepth_factorå†³å®šäº†æ¨¡å‹çš„å±‚æ•°ï¼Œwidth_factoråˆ™å½±å“æ¨¡å‹çš„å®½åº¦ï¼Œè€Œratioå‚æ•°åˆ™ç”¨äºè®¾ç½®åŸºç¡€é€šé“çš„å€æ•°ã€‚è¿™ç§çµæ´»çš„è®¾ç½®æ–¹å¼ä½¿å¾—YOLOv8èƒ½å¤Ÿåœ¨ä¸åŒçš„åº”ç”¨åœºæ™¯ä¸­å®ç°æ€§èƒ½çš„ä¼˜åŒ–ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œä¸ªæ€§åŒ–çš„è°ƒæ•´ã€‚

æ€»çš„æ¥è¯´ï¼ŒYOLOv8ä½œä¸ºYOLOç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œåœ¨ç®—æ³•è®¾è®¡å’Œç»“æ„ä¸Šè¿›è¡Œäº†å¤šæ–¹é¢çš„åˆ›æ–°å’Œä¼˜åŒ–ã€‚é€šè¿‡å¼•å…¥CSPç»“æ„ã€C2fæ¨¡å—ã€PAN-FPNç»“æ„ä»¥åŠAnchor-Freeæ£€æµ‹æ–¹å¼ï¼ŒYOLOv8åœ¨ä¿æŒé«˜æ•ˆçš„åŒæ—¶ï¼Œæ˜¾è‘—æå‡äº†ç›®æ ‡æ£€æµ‹çš„ç²¾åº¦å’Œé²æ£’æ€§ã€‚æ­¤å¤–ï¼ŒYOLOv8çš„æ˜“ç”¨æ€§å’Œçµæ´»æ€§ä½¿å¾—å®ƒåœ¨å®é™…åº”ç”¨ä¸­å…·æœ‰å¹¿æ³›çš„é€‚ç”¨æ€§ï¼Œæˆä¸ºäº†è®¡ç®—æœºè§†è§‰é¢†åŸŸä¸­å¤‡å—æ¬¢è¿çš„ç›®æ ‡æ£€æµ‹ç®—æ³•ä¹‹ä¸€ã€‚éšç€YOLOv8çš„ä¸æ–­å‘å±•å’Œåº”ç”¨ï¼Œæˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡ï¼Œå®ƒå°†åœ¨æœªæ¥çš„è®¡ç®—æœºè§†è§‰ç ”ç©¶å’Œåº”ç”¨ä¸­å‘æŒ¥æ›´åŠ é‡è¦çš„ä½œç”¨ã€‚

![18.png](18.png)

### 11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰

#### 11.1 code\ultralytics\data\loaders.py

ä»¥ä¸‹æ˜¯å¯¹ç»™å®šä»£ç çš„æ ¸å¿ƒéƒ¨åˆ†è¿›è¡Œåˆ†æå’Œè¯¦ç»†æ³¨é‡Šçš„ç»“æœã€‚ä¸ºäº†ä¿æŒä»£ç çš„ç®€æ´æ€§ï¼Œæˆ‘å°†åªä¿ç•™æœ€é‡è¦çš„ç±»å’Œæ–¹æ³•ï¼Œå¹¶æä¾›ä¸­æ–‡æ³¨é‡Šã€‚

```python
import cv2
import numpy as np
import torch
from threading import Thread
from pathlib import Path
from urllib.parse import urlparse

class LoadStreams:
    """
    è§†é¢‘æµåŠ è½½å™¨ï¼Œæ”¯æŒå¤šç§è§†é¢‘æµè¾“å…¥ï¼ŒåŒ…æ‹¬RTSPã€RTMPã€HTTPå’ŒTCPæµã€‚

    å±æ€§:
        sources (str): è§†é¢‘æµçš„è¾“å…¥è·¯å¾„æˆ–URLã€‚
        imgsz (int): å¤„ç†å›¾åƒçš„å¤§å°ï¼Œé»˜è®¤ä¸º640ã€‚
        vid_stride (int): è§†é¢‘å¸§ç‡æ­¥å¹…ï¼Œé»˜è®¤ä¸º1ã€‚
        running (bool): è¡¨ç¤ºæµçº¿ç¨‹æ˜¯å¦åœ¨è¿è¡Œçš„æ ‡å¿—ã€‚
        imgs (list): æ¯ä¸ªæµçš„å›¾åƒå¸§åˆ—è¡¨ã€‚
        fps (list): æ¯ä¸ªæµçš„å¸§ç‡åˆ—è¡¨ã€‚
        threads (list): æ¯ä¸ªæµçš„çº¿ç¨‹åˆ—è¡¨ã€‚
        caps (list): æ¯ä¸ªæµçš„cv2.VideoCaptureå¯¹è±¡åˆ—è¡¨ã€‚
    """

    def __init__(self, sources="file.streams", imgsz=640, vid_stride=1):
        """åˆå§‹åŒ–æµåŠ è½½å™¨ï¼Œè®¾ç½®è§†é¢‘æºå’Œç›¸å…³å‚æ•°ã€‚"""
        self.running = True  # çº¿ç¨‹è¿è¡Œæ ‡å¿—
        self.imgsz = imgsz
        self.vid_stride = vid_stride  # è§†é¢‘å¸§ç‡æ­¥å¹…

        # è¯»å–è§†é¢‘æº
        sources = Path(sources).read_text().rsplit() if os.path.isfile(sources) else [sources]
        n = len(sources)
        self.fps = [0] * n  # æ¯ä¸ªæµçš„å¸§ç‡
        self.threads = [None] * n  # çº¿ç¨‹åˆ—è¡¨
        self.caps = [None] * n  # è§†é¢‘æ•è·å¯¹è±¡åˆ—è¡¨
        self.imgs = [[] for _ in range(n)]  # å›¾åƒåˆ—è¡¨
        self.sources = [x for x in sources]  # æºåç§°

        for i, s in enumerate(sources):
            # åˆ›å»ºè§†é¢‘æ•è·å¯¹è±¡
            self.caps[i] = cv2.VideoCapture(s)
            if not self.caps[i].isOpened():
                raise ConnectionError(f"æ— æ³•æ‰“å¼€ {s}")
            self.fps[i] = self.caps[i].get(cv2.CAP_PROP_FPS) or 30  # é»˜è®¤å¸§ç‡ä¸º30
            self.threads[i] = Thread(target=self.update, args=([i, self.caps[i]]), daemon=True)
            self.threads[i].start()

    def update(self, i, cap):
        """åœ¨åå°çº¿ç¨‹ä¸­è¯»å–è§†é¢‘æµçš„å¸§ã€‚"""
        while self.running and cap.isOpened():
            success, im = cap.read()  # è¯»å–ä¸€å¸§
            if success:
                self.imgs[i].append(im)  # å°†å¸§æ·»åŠ åˆ°å›¾åƒåˆ—è¡¨
            else:
                break  # å¦‚æœè¯»å–å¤±è´¥ï¼Œé€€å‡ºå¾ªç¯

    def close(self):
        """å…³é—­æµåŠ è½½å™¨å¹¶é‡Šæ”¾èµ„æºã€‚"""
        self.running = False  # åœæ­¢çº¿ç¨‹
        for thread in self.threads:
            if thread.is_alive():
                thread.join()  # ç­‰å¾…çº¿ç¨‹ç»“æŸ
        for cap in self.caps:
            cap.release()  # é‡Šæ”¾è§†é¢‘æ•è·å¯¹è±¡

    def __iter__(self):
        """è¿”å›è¿­ä»£å™¨å¯¹è±¡ã€‚"""
        self.count = -1
        return self

    def __next__(self):
        """è¿”å›ä¸‹ä¸€ä¸ªå›¾åƒå¸§ã€‚"""
        self.count += 1
        if self.count >= len(self.imgs):
            raise StopIteration  # å¦‚æœæ²¡æœ‰æ›´å¤šå¸§ï¼Œåœæ­¢è¿­ä»£

        return self.imgs[self.count]  # è¿”å›å½“å‰å¸§

class LoadImages:
    """
    å›¾åƒåŠ è½½å™¨ï¼Œæ”¯æŒä»æ–‡ä»¶åŠ è½½å›¾åƒå’Œè§†é¢‘ã€‚

    å±æ€§:
        imgsz (int): å›¾åƒå¤§å°ï¼Œé»˜è®¤ä¸º640ã€‚
        files (list): å›¾åƒå’Œè§†é¢‘æ–‡ä»¶è·¯å¾„åˆ—è¡¨ã€‚
        nf (int): æ–‡ä»¶æ€»æ•°ï¼ˆå›¾åƒå’Œè§†é¢‘ï¼‰ã€‚
    """

    def __init__(self, path, imgsz=640):
        """åˆå§‹åŒ–å›¾åƒåŠ è½½å™¨ï¼Œè¯»å–æ–‡ä»¶è·¯å¾„ã€‚"""
        self.imgsz = imgsz
        self.files = [path] if isinstance(path, str) else path  # æ”¯æŒå•ä¸ªè·¯å¾„æˆ–è·¯å¾„åˆ—è¡¨
        self.nf = len(self.files)  # æ–‡ä»¶æ€»æ•°

    def __iter__(self):
        """è¿”å›è¿­ä»£å™¨å¯¹è±¡ã€‚"""
        self.count = 0
        return self

    def __next__(self):
        """è¿”å›ä¸‹ä¸€ä¸ªå›¾åƒåŠå…¶è·¯å¾„ã€‚"""
        if self.count >= self.nf:
            raise StopIteration  # å¦‚æœæ²¡æœ‰æ›´å¤šæ–‡ä»¶ï¼Œåœæ­¢è¿­ä»£

        path = self.files[self.count]
        im0 = cv2.imread(path)  # è¯»å–å›¾åƒ
        self.count += 1
        return [path], [im0], None, ""  # è¿”å›è·¯å¾„å’Œå›¾åƒ

    def __len__(self):
        """è¿”å›æ–‡ä»¶æ•°é‡ã€‚"""
        return self.nf  # æ–‡ä»¶æ•°é‡

# å…¶ä»–ç±»å’Œå‡½æ•°çœç•¥ï¼Œä¸»è¦ä¿ç•™äº† LoadStreams å’Œ LoadImages ç±»
```

### ä»£ç åˆ†æ
1. **LoadStreams ç±»**: è¯¥ç±»ç”¨äºä»è§†é¢‘æµä¸­è¯»å–å¸§ï¼Œæ”¯æŒå¤šç§è§†é¢‘æºã€‚å®ƒåœ¨åˆå§‹åŒ–æ—¶åˆ›å»ºå¤šä¸ªçº¿ç¨‹æ¥å¤„ç†è§†é¢‘æµçš„è¯»å–ï¼Œå¹¶æä¾›äº†å…³é—­å’Œè¿­ä»£åŠŸèƒ½ã€‚

2. **LoadImages ç±»**: è¯¥ç±»ç”¨äºä»æŒ‡å®šè·¯å¾„åŠ è½½å›¾åƒå’Œè§†é¢‘ã€‚å®ƒæ”¯æŒå•ä¸ªæ–‡ä»¶è·¯å¾„æˆ–å¤šä¸ªè·¯å¾„ï¼Œå¹¶æä¾›äº†è¿­ä»£åŠŸèƒ½ä»¥é€ä¸ªè¿”å›å›¾åƒã€‚

### å…³é”®åŠŸèƒ½
- **å¤šçº¿ç¨‹å¤„ç†**: `LoadStreams` ç±»ä½¿ç”¨çº¿ç¨‹æ¥å¹¶è¡Œè¯»å–è§†é¢‘æµï¼Œç¡®ä¿æµç•…çš„å¸§è·å–ã€‚
- **æ”¯æŒå¤šç§è¾“å…¥æº**: ä¸¤ä¸ªç±»éƒ½æ”¯æŒå¤šç§è¾“å…¥æºï¼ŒåŒ…æ‹¬æœ¬åœ°æ–‡ä»¶å’Œè§†é¢‘æµã€‚
- **è¿­ä»£å™¨å®ç°**: ä¸¤ä¸ªç±»éƒ½å®ç°äº†è¿­ä»£å™¨åè®®ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡ç®€å•çš„å¾ªç¯æ¥è·å–å›¾åƒå¸§ã€‚

é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä»£ç çš„æ ¸å¿ƒéƒ¨åˆ†å¾—ä»¥ä¿ç•™ï¼ŒåŒæ—¶æä¾›äº†æ¸…æ™°çš„ä¸­æ–‡æ³¨é‡Šï¼Œä¾¿äºç†è§£å’Œç»´æŠ¤ã€‚

è¿™ä¸ªæ–‡ä»¶æ˜¯Ultralytics YOLOï¼ˆYou Only Look Onceï¼‰é¡¹ç›®ä¸­çš„ä¸€ä¸ªæ•°æ®åŠ è½½å™¨æ¨¡å—ï¼Œä¸»è¦è´Ÿè´£å¤„ç†å„ç§è¾“å…¥æºï¼ˆå¦‚è§†é¢‘æµã€å›¾ç‰‡ã€æˆªå›¾ç­‰ï¼‰ï¼Œä»¥ä¾¿äºåç»­çš„ç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚æ–‡ä»¶ä¸­å®šä¹‰äº†å¤šä¸ªç±»ï¼Œæ¯ä¸ªç±»è´Ÿè´£ä¸åŒç±»å‹çš„æ•°æ®åŠ è½½ã€‚

é¦–å…ˆï¼Œ`SourceTypes`ç±»ç”¨äºè¡¨ç¤ºä¸åŒçš„è¾“å…¥æºç±»å‹ï¼ŒåŒ…æ‹¬ç½‘ç»œæ‘„åƒå¤´ã€æˆªå›¾ã€å›¾åƒæ–‡ä»¶å’Œå¼ é‡ã€‚æ¥ä¸‹æ¥æ˜¯`LoadStreams`ç±»ï¼Œå®ƒæ˜¯ä¸€ä¸ªè§†é¢‘æµåŠ è½½å™¨ï¼Œæ”¯æŒRTSPã€RTMPã€HTTPå’ŒTCPç­‰å¤šç§è§†é¢‘æµæ ¼å¼ã€‚è¿™ä¸ªç±»çš„æ„é€ å‡½æ•°åˆå§‹åŒ–äº†ä¸€äº›é‡è¦çš„å‚æ•°ï¼Œæ¯”å¦‚å›¾åƒå¤§å°ã€è§†é¢‘å¸§ç‡ç­‰ï¼Œå¹¶é€šè¿‡OpenCVçš„`VideoCapture`å¯¹è±¡æ‰“å¼€è§†é¢‘æµã€‚åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œå®ƒè¿˜ä¼šå¯åŠ¨çº¿ç¨‹æ¥ä¸æ–­è¯»å–è§†é¢‘æµä¸­çš„å¸§ï¼Œä»¥ä¾¿å®æ—¶å¤„ç†ã€‚

`LoadStreams`ç±»ä¸­çš„`update`æ–¹æ³•åœ¨åå°çº¿ç¨‹ä¸­è¿è¡Œï¼Œè´Ÿè´£ä»è§†é¢‘æµä¸­è¯»å–å¸§ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªç¼“å†²åŒºä¸­ã€‚`close`æ–¹æ³•ç”¨äºå…³é—­è§†é¢‘æµå¹¶é‡Šæ”¾èµ„æºã€‚`__iter__`å’Œ`__next__`æ–¹æ³•ä½¿å¾—è¯¥ç±»å¯ä»¥è¢«è¿­ä»£ï¼Œè¿”å›æºè·¯å¾„ã€å¤„ç†åçš„å›¾åƒå’ŒåŸå§‹å›¾åƒã€‚

`LoadScreenshots`ç±»ç”¨äºå¤„ç†å±å¹•æˆªå›¾ï¼Œå®ƒé€šè¿‡`mss`åº“æ•è·å±å¹•å›¾åƒï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºé€‚åˆYOLOå¤„ç†çš„æ ¼å¼ã€‚è¯¥ç±»åŒæ ·å®ç°äº†è¿­ä»£å™¨æ¥å£ï¼Œèƒ½å¤Ÿé€å¸§è¿”å›æˆªå›¾ã€‚

`LoadImages`ç±»åˆ™ç”¨äºåŠ è½½å›¾åƒå’Œè§†é¢‘æ–‡ä»¶ã€‚å®ƒæ”¯æŒä»æ–‡ä»¶è·¯å¾„ã€ç›®å½•æˆ–æ–‡æœ¬æ–‡ä»¶ä¸­è¯»å–å›¾åƒå’Œè§†é¢‘ï¼Œå¹¶åœ¨å†…éƒ¨ä½¿ç”¨OpenCVè¿›è¡Œå¤„ç†ã€‚è¯¥ç±»çš„æ„é€ å‡½æ•°ä¼šæ£€æŸ¥æ–‡ä»¶çš„å­˜åœ¨æ€§ï¼Œå¹¶æ ¹æ®æ–‡ä»¶ç±»å‹è¿›è¡Œåˆ†ç±»ï¼Œç”Ÿæˆä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨ã€‚

`LoadPilAndNumpy`ç±»ç”¨äºä»PILå›¾åƒå’ŒNumpyæ•°ç»„ä¸­åŠ è½½å›¾åƒæ•°æ®ï¼Œç¡®ä¿è¾“å…¥å›¾åƒçš„æ ¼å¼æ­£ç¡®ï¼Œå¹¶æä¾›äº†è¿­ä»£å™¨æ¥å£ã€‚

`LoadTensor`ç±»åˆ™ä¸“é—¨ç”¨äºå¤„ç†PyTorchå¼ é‡ï¼Œç¡®ä¿è¾“å…¥çš„å¼ é‡ç¬¦åˆYOLOæ¨¡å‹çš„è¦æ±‚ã€‚

æ­¤å¤–ï¼Œæ–‡ä»¶ä¸­è¿˜å®šä¹‰äº†ä¸€ä¸ª`autocast_list`å‡½æ•°ï¼Œç”¨äºå°†ä¸åŒç±»å‹çš„è¾“å…¥æºåˆå¹¶ä¸ºNumpyæ•°ç»„æˆ–PILå›¾åƒçš„åˆ—è¡¨ã€‚æœ€åï¼Œ`get_best_youtube_url`å‡½æ•°ç”¨äºä»YouTubeè§†é¢‘ä¸­æå–æœ€ä½³è´¨é‡çš„MP4è§†é¢‘æµURLã€‚

æ•´ä¸ªæ¨¡å—çš„è®¾è®¡æ—¨åœ¨çµæ´»å¤„ç†å¤šç§è¾“å…¥æºï¼Œæ–¹ä¾¿ç”¨æˆ·åœ¨ä¸åŒçš„ç¯å¢ƒä¸­ä½¿ç”¨YOLOè¿›è¡Œç›®æ ‡æ£€æµ‹ã€‚é€šè¿‡è¿™äº›ç±»å’Œæ–¹æ³•ï¼Œç”¨æˆ·å¯ä»¥è½»æ¾åœ°åŠ è½½å’Œå¤„ç†å›¾åƒæ•°æ®ï¼Œä¸ºåç»­çš„æ¨¡å‹æ¨ç†åšå¥½å‡†å¤‡ã€‚

#### 11.2 ui.py

```python
import sys
import subprocess

def run_script(script_path):
    """
    ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

    Args:
        script_path (str): è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„

    Returns:
        None
    """
    # è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„
    python_path = sys.executable

    # æ„å»ºè¿è¡Œå‘½ä»¤ï¼Œä½¿ç”¨ streamlit è¿è¡ŒæŒ‡å®šçš„è„šæœ¬
    command = f'"{python_path}" -m streamlit run "{script_path}"'

    # æ‰§è¡Œå‘½ä»¤å¹¶ç­‰å¾…å…¶å®Œæˆ
    result = subprocess.run(command, shell=True)
    
    # æ£€æŸ¥å‘½ä»¤æ‰§è¡Œçš„è¿”å›ç ï¼Œå¦‚æœä¸ä¸º0åˆ™è¡¨ç¤ºå‡ºé”™
    if result.returncode != 0:
        print("è„šæœ¬è¿è¡Œå‡ºé”™ã€‚")


# å®ä¾‹åŒ–å¹¶è¿è¡Œåº”ç”¨
if __name__ == "__main__":
    # æŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„
    script_path = "web.py"  # è¿™é‡Œå¯ä»¥ç›´æ¥æŒ‡å®šè„šæœ¬å

    # è°ƒç”¨å‡½æ•°è¿è¡Œè„šæœ¬
    run_script(script_path)
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š

1. **å¯¼å…¥æ¨¡å—**ï¼š
   - `sys`ï¼šç”¨äºè®¿é—®ä¸ Python è§£é‡Šå™¨ç´§å¯†ç›¸å…³çš„å˜é‡å’Œå‡½æ•°ã€‚
   - `subprocess`ï¼šç”¨äºåˆ›å»ºæ–°è¿›ç¨‹ã€è¿æ¥åˆ°å®ƒä»¬çš„è¾“å…¥/è¾“å‡º/é”™è¯¯ç®¡é“ï¼Œå¹¶è·å–å®ƒä»¬çš„è¿”å›ç ã€‚

2. **å®šä¹‰ `run_script` å‡½æ•°**ï¼š
   - æ­¤å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° `script_path`ï¼Œè¡¨ç¤ºè¦è¿è¡Œçš„ Python è„šæœ¬çš„è·¯å¾„ã€‚
   - ä½¿ç”¨ `sys.executable` è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œä»¥ç¡®ä¿è„šæœ¬åœ¨å½“å‰ç¯å¢ƒä¸­è¿è¡Œã€‚

3. **æ„å»ºå‘½ä»¤**ï¼š
   - ä½¿ç”¨ `streamlit` æ¨¡å—è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ï¼Œæ„å»ºçš„å‘½ä»¤å­—ç¬¦ä¸²æ ¼å¼ä¸ºï¼š`"{python_path}" -m streamlit run "{script_path}"`ã€‚

4. **æ‰§è¡Œå‘½ä»¤**ï¼š
   - ä½¿ç”¨ `subprocess.run` æ‰§è¡Œæ„å»ºçš„å‘½ä»¤ï¼Œå¹¶é€šè¿‡ `shell=True` å…è®¸åœ¨ shell ä¸­æ‰§è¡Œå‘½ä»¤ã€‚
   - æ£€æŸ¥å‘½ä»¤çš„è¿”å›ç ï¼Œå¦‚æœè¿”å›ç ä¸ä¸º0ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œå‡ºé”™ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯ã€‚

5. **ä¸»ç¨‹åºå…¥å£**ï¼š
   - åœ¨ `if __name__ == "__main__":` å—ä¸­ï¼ŒæŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ï¼ˆæ­¤å¤„ä¸º `"web.py"`ï¼‰ã€‚
   - è°ƒç”¨ `run_script` å‡½æ•°æ¥æ‰§è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶åä¸º `ui.py`ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯ä½¿ç”¨å½“å‰çš„ Python ç¯å¢ƒæ¥è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„è„šæœ¬ï¼Œå…·ä½“æ˜¯ä¸€ä¸ªåä¸º `web.py` çš„æ–‡ä»¶ã€‚ç¨‹åºé¦–å…ˆå¯¼å…¥äº†å¿…è¦çš„æ¨¡å—ï¼ŒåŒ…æ‹¬ `sys`ã€`os` å’Œ `subprocess`ï¼Œä»¥åŠä¸€ä¸ªè‡ªå®šä¹‰çš„è·¯å¾„å¤„ç†æ¨¡å— `abs_path`ã€‚

åœ¨ `run_script` å‡½æ•°ä¸­ï¼Œé¦–å…ˆè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿åœ¨æ­£ç¡®çš„ç¯å¢ƒä¸­è¿è¡Œè„šæœ¬ã€‚æ¥ç€ï¼Œæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œè¯¥å‘½ä»¤ä½¿ç”¨ `streamlit` æ¨¡å—æ¥è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚`streamlit` æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºæ•°æ®åº”ç”¨çš„æµè¡Œåº“ï¼Œå‘½ä»¤çš„æ ¼å¼ä¸º `python -m streamlit run "script_path"`ã€‚

ç„¶åï¼Œä½¿ç”¨ `subprocess.run` æ–¹æ³•æ‰§è¡Œæ„å»ºå¥½çš„å‘½ä»¤ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨ä¸€ä¸ªæ–°çš„å­è¿›ç¨‹ä¸­è¿è¡Œå‘½ä»¤ï¼Œå¹¶ç­‰å¾…å…¶å®Œæˆã€‚å¦‚æœå‘½ä»¤æ‰§è¡Œåè¿”å›çš„çŠ¶æ€ç ä¸ä¸ºé›¶ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œå‡ºé”™ï¼Œç¨‹åºä¼šæ‰“å°å‡ºç›¸åº”çš„é”™è¯¯ä¿¡æ¯ã€‚

åœ¨æ–‡ä»¶çš„æœ€åéƒ¨åˆ†ï¼Œä½¿ç”¨ `if __name__ == "__main__":` è¯­å¥æ¥ç¡®ä¿åªæœ‰åœ¨ç›´æ¥è¿è¡Œè¯¥æ–‡ä»¶æ—¶æ‰ä¼šæ‰§è¡Œåé¢çš„ä»£ç ã€‚åœ¨è¿™é‡Œï¼Œé¦–å…ˆè°ƒç”¨ `abs_path` å‡½æ•°æ¥è·å– `web.py` çš„ç»å¯¹è·¯å¾„ï¼Œç„¶åè°ƒç”¨ `run_script` å‡½æ•°æ¥è¿è¡Œè¿™ä¸ªè„šæœ¬ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªç¨‹åºçš„ä½œç”¨æ˜¯æä¾›ä¸€ä¸ªç®€å•çš„æ¥å£æ¥è¿è¡Œ `web.py` è„šæœ¬ï¼Œå¹¶ç¡®ä¿åœ¨å½“å‰ Python ç¯å¢ƒä¸­æ‰§è¡Œã€‚

#### 11.3 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\tuner.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
import subprocess
from ultralytics.utils import LOGGER, NUM_THREADS
from ray import tune
from ray.air import RunConfig
from ray.tune.schedulers import ASHAScheduler
from ray.air.integrations.wandb import WandbLoggerCallback

def run_ray_tune(model, space: dict = None, grace_period: int = 10, gpu_per_trial: int = None, max_samples: int = 10, **train_args):
    """
    ä½¿ç”¨ Ray Tune è¿›è¡Œè¶…å‚æ•°è°ƒä¼˜ã€‚

    å‚æ•°:
        model (YOLO): è¦è¿›è¡Œè°ƒä¼˜çš„æ¨¡å‹ã€‚
        space (dict, optional): è¶…å‚æ•°æœç´¢ç©ºé—´ã€‚é»˜è®¤ä¸º Noneã€‚
        grace_period (int, optional): ASHA è°ƒåº¦å™¨çš„å®½é™æœŸï¼ˆä»¥è½®æ¬¡ä¸ºå•ä½ï¼‰ã€‚é»˜è®¤ä¸º 10ã€‚
        gpu_per_trial (int, optional): æ¯ä¸ªè¯•éªŒåˆ†é…çš„ GPU æ•°é‡ã€‚é»˜è®¤ä¸º Noneã€‚
        max_samples (int, optional): è¦è¿è¡Œçš„æœ€å¤§è¯•éªŒæ¬¡æ•°ã€‚é»˜è®¤ä¸º 10ã€‚
        train_args (dict, optional): ä¼ é€’ç»™ `train()` æ–¹æ³•çš„å…¶ä»–å‚æ•°ã€‚é»˜è®¤ä¸º {}ã€‚

    è¿”å›:
        (dict): åŒ…å«è¶…å‚æ•°æœç´¢ç»“æœçš„å­—å…¸ã€‚
    """

    # æ—¥å¿—è®°å½• Ray Tune çš„å­¦ä¹ é“¾æ¥
    LOGGER.info('ğŸ’¡ Learn about RayTune at https://docs.ultralytics.com/integrations/ray-tune')

    # å®‰è£… Ray Tune
    subprocess.run('pip install ray[tune]'.split(), check=True)

    # å®šä¹‰é»˜è®¤çš„è¶…å‚æ•°æœç´¢ç©ºé—´
    default_space = {
        'lr0': tune.uniform(1e-5, 1e-1),  # åˆå§‹å­¦ä¹ ç‡
        'lrf': tune.uniform(0.01, 1.0),  # æœ€ç»ˆå­¦ä¹ ç‡çš„æ¯”ä¾‹
        'momentum': tune.uniform(0.6, 0.98),  # åŠ¨é‡
        'weight_decay': tune.uniform(0.0, 0.001),  # æƒé‡è¡°å‡
        'warmup_epochs': tune.uniform(0.0, 5.0),  # é¢„çƒ­è½®æ¬¡
        'box': tune.uniform(0.02, 0.2),  # è¾¹æ¡†æŸå¤±å¢ç›Š
        'cls': tune.uniform(0.2, 4.0),  # åˆ†ç±»æŸå¤±å¢ç›Š
        # å…¶ä»–æ•°æ®å¢å¼ºå‚æ•°...
    }

    # å°†æ¨¡å‹æ”¾å…¥ Ray å­˜å‚¨ä¸­
    model_in_store = ray.put(model)

    def _tune(config):
        """
        ä½¿ç”¨æŒ‡å®šçš„è¶…å‚æ•°å’Œå…¶ä»–å‚æ•°è®­ç»ƒ YOLO æ¨¡å‹ã€‚

        å‚æ•°:
            config (dict): ç”¨äºè®­ç»ƒçš„è¶…å‚æ•°å­—å…¸ã€‚

        è¿”å›:
            None.
        """
        model_to_train = ray.get(model_in_store)  # ä» Ray å­˜å‚¨ä¸­è·å–æ¨¡å‹
        model_to_train.reset_callbacks()  # é‡ç½®å›è°ƒ
        config.update(train_args)  # æ›´æ–°é…ç½®
        results = model_to_train.train(**config)  # è®­ç»ƒæ¨¡å‹
        return results.results_dict  # è¿”å›ç»“æœå­—å…¸

    # è·å–æœç´¢ç©ºé—´
    if not space:
        space = default_space  # å¦‚æœæ²¡æœ‰æä¾›æœç´¢ç©ºé—´ï¼Œåˆ™ä½¿ç”¨é»˜è®¤ç©ºé—´

    # è·å–æ•°æ®é›†
    data = train_args.get('data', TASK2DATA[model.task])  # è·å–æ•°æ®é›†
    space['data'] = data  # å°†æ•°æ®é›†æ·»åŠ åˆ°æœç´¢ç©ºé—´

    # å®šä¹‰å¯è®­ç»ƒçš„å‡½æ•°å¹¶åˆ†é…èµ„æº
    trainable_with_resources = tune.with_resources(_tune, {'cpu': NUM_THREADS, 'gpu': gpu_per_trial or 0})

    # å®šä¹‰ ASHA è°ƒåº¦å™¨
    asha_scheduler = ASHAScheduler(time_attr='epoch', metric='metric_name', mode='max', max_t=100, grace_period=grace_period, reduction_factor=3)

    # å®šä¹‰è¶…å‚æ•°æœç´¢çš„å›è°ƒ
    tuner_callbacks = [WandbLoggerCallback(project='YOLOv8-tune')] if wandb else []

    # åˆ›å»º Ray Tune è¶…å‚æ•°æœç´¢è°ƒä¼˜å™¨
    tuner = tune.Tuner(trainable_with_resources, param_space=space, tune_config=tune.TuneConfig(scheduler=asha_scheduler, num_samples=max_samples), run_config=RunConfig(callbacks=tuner_callbacks))

    # è¿è¡Œè¶…å‚æ•°æœç´¢
    tuner.fit()

    # è¿”å›è¶…å‚æ•°æœç´¢çš„ç»“æœ
    return tuner.get_results()
```

### ä»£ç è¯´æ˜ï¼š
1. **å¯¼å…¥å¿…è¦çš„åº“**ï¼šå¼•å…¥ `subprocess` ç”¨äºå®‰è£…ä¾èµ–ï¼Œ`ray` å’Œ `tune` ç”¨äºè¶…å‚æ•°è°ƒä¼˜ï¼Œ`LOGGER` ç”¨äºæ—¥å¿—è®°å½•ã€‚
2. **å®šä¹‰ `run_ray_tune` å‡½æ•°**ï¼šè¯¥å‡½æ•°æ¥å—æ¨¡å‹å’Œè¶…å‚æ•°é…ç½®ï¼Œä½¿ç”¨ Ray Tune è¿›è¡Œè¶…å‚æ•°è°ƒä¼˜ã€‚
3. **å®‰è£… Ray Tune**ï¼šé€šè¿‡ `subprocess.run` å®‰è£… Ray Tune ä¾èµ–ã€‚
4. **å®šä¹‰é»˜è®¤è¶…å‚æ•°ç©ºé—´**ï¼šåŒ…æ‹¬å­¦ä¹ ç‡ã€åŠ¨é‡ã€æƒé‡è¡°å‡ç­‰å‚æ•°çš„èŒƒå›´ã€‚
5. **å°†æ¨¡å‹æ”¾å…¥ Ray å­˜å‚¨**ï¼šä»¥ä¾¿åœ¨è°ƒä¼˜è¿‡ç¨‹ä¸­å…±äº«æ¨¡å‹ã€‚
6. **å®šä¹‰ `_tune` å‡½æ•°**ï¼šç”¨äºè®­ç»ƒæ¨¡å‹å¹¶è¿”å›ç»“æœå­—å…¸ã€‚
7. **è·å–æœç´¢ç©ºé—´å’Œæ•°æ®é›†**ï¼šå¦‚æœæœªæä¾›æœç´¢ç©ºé—´ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ï¼Œå¹¶è·å–æ•°æ®é›†ã€‚
8. **å®šä¹‰å¯è®­ç»ƒçš„å‡½æ•°**ï¼šå°† `_tune` å‡½æ•°ä¸èµ„æºç»‘å®šã€‚
9. **å®šä¹‰ ASHA è°ƒåº¦å™¨**ï¼šç”¨äºæ§åˆ¶è¶…å‚æ•°è°ƒä¼˜çš„è¿‡ç¨‹ã€‚
10. **åˆ›å»ºè°ƒä¼˜å™¨å¹¶è¿è¡Œ**ï¼šä½¿ç”¨å®šä¹‰çš„é…ç½®è¿è¡Œè¶…å‚æ•°è°ƒä¼˜ï¼Œå¹¶è¿”å›ç»“æœã€‚

è¯¥ç¨‹åºæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºYOLOv8æ¨¡å‹è¶…å‚æ•°è°ƒä¼˜çš„å·¥å…·ï¼Œä¸»è¦ä¾èµ–äºRay Tuneåº“ã€‚ç¨‹åºçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯é€šè¿‡ä¸åŒçš„è¶…å‚æ•°ç»„åˆæ¥ä¼˜åŒ–YOLOæ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚é¦–å…ˆï¼Œç¨‹åºå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„æ¨¡å—ï¼ŒåŒ…æ‹¬ç”¨äºé…ç½®å’Œæ—¥å¿—è®°å½•çš„æ¨¡å—ã€‚æ¥ç€ï¼Œå®šä¹‰äº†ä¸€ä¸ªåä¸º`run_ray_tune`çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—å¤šä¸ªå‚æ•°ï¼Œå…¶ä¸­åŒ…æ‹¬è¦è°ƒä¼˜çš„æ¨¡å‹ã€è¶…å‚æ•°æœç´¢ç©ºé—´ã€æ¯ä¸ªè¯•éªŒçš„GPUæ•°é‡ã€æœ€å¤§æ ·æœ¬æ•°ç­‰ã€‚

åœ¨å‡½æ•°å†…éƒ¨ï¼Œé¦–å…ˆè®°å½•äº†ä¸€æ¡ä¿¡æ¯ï¼Œæç¤ºç”¨æˆ·å¯ä»¥è®¿é—®Ray Tuneçš„æ–‡æ¡£ã€‚æ¥ç€ï¼Œç¨‹åºå°è¯•å®‰è£…Ray Tuneåº“ï¼Œå¦‚æœå®‰è£…å¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚éšåï¼Œç¨‹åºå®šä¹‰äº†ä¸€ä¸ªé»˜è®¤çš„è¶…å‚æ•°æœç´¢ç©ºé—´ï¼ŒåŒ…æ‹¬å­¦ä¹ ç‡ã€åŠ¨é‡ã€æƒé‡è¡°å‡ç­‰å¤šä¸ªå‚æ•°ï¼Œè¿™äº›å‚æ•°ä¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è¢«è°ƒä¼˜ã€‚

å‡½æ•°å†…éƒ¨è¿˜å®šä¹‰äº†ä¸€ä¸ªåä¸º`_tune`çš„å†…éƒ¨å‡½æ•°ï¼Œè¯¥å‡½æ•°è´Ÿè´£æ ¹æ®ç»™å®šçš„è¶…å‚æ•°é…ç½®è®­ç»ƒYOLOæ¨¡å‹ï¼Œå¹¶è¿”å›è®­ç»ƒç»“æœã€‚ç„¶åï¼Œç¨‹åºæ£€æŸ¥æ˜¯å¦æä¾›äº†è¶…å‚æ•°æœç´¢ç©ºé—´ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„æœç´¢ç©ºé—´ã€‚æ­¤å¤–ï¼Œç¨‹åºè¿˜è·å–æ•°æ®é›†çš„ä¿¡æ¯ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°è¶…å‚æ•°ç©ºé—´ä¸­ã€‚

æ¥ä¸‹æ¥ï¼Œç¨‹åºä½¿ç”¨Ray Tuneçš„åŠŸèƒ½å®šä¹‰äº†ä¸€ä¸ªå¯è®­ç»ƒçš„å‡½æ•°ï¼Œå¹¶è®¾ç½®äº†èµ„æºåˆ†é…ã€‚å®ƒè¿˜å®šä¹‰äº†ä¸€ä¸ªASHASchedulerè°ƒåº¦å™¨ï¼Œç”¨äºç®¡ç†è¶…å‚æ•°æœç´¢çš„è¿‡ç¨‹ã€‚ç¨‹åºå¯ä»¥é€‰æ‹©æ€§åœ°ä½¿ç”¨Wandbè¿›è¡Œè®­ç»ƒè¿‡ç¨‹çš„å¯è§†åŒ–å’Œè®°å½•ã€‚

æœ€åï¼Œç¨‹åºåˆ›å»ºäº†ä¸€ä¸ªRay Tuneçš„è°ƒä¼˜å™¨ï¼Œå¹¶è°ƒç”¨å…¶`fit`æ–¹æ³•å¼€å§‹è¶…å‚æ•°æœç´¢ã€‚å®Œæˆåï¼Œå‡½æ•°è¿”å›è°ƒä¼˜çš„ç»“æœã€‚è¿™æ®µä»£ç ä¸ºYOLOv8æ¨¡å‹çš„è®­ç»ƒæä¾›äº†çµæ´»çš„è¶…å‚æ•°è°ƒä¼˜æ‰‹æ®µï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æ‰¾åˆ°æœ€ä½³çš„è®­ç»ƒé…ç½®ã€‚

#### 11.4 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\backbone\fasternet.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import torch
import torch.nn as nn
from typing import List
from torch import Tensor

class PartialConv3(nn.Module):
    """
    å®ç°éƒ¨åˆ†å·ç§¯çš„ç±»ï¼Œæ”¯æŒä¸¤ç§å‰å‘ä¼ æ’­æ–¹å¼ï¼šåˆ‡ç‰‡å’Œæ‹¼æ¥ã€‚
    """
    def __init__(self, dim, n_div, forward):
        super().__init__()
        self.dim_conv3 = dim // n_div  # éƒ¨åˆ†å·ç§¯çš„é€šé“æ•°
        self.dim_untouched = dim - self.dim_conv3  # æœªæ”¹å˜çš„é€šé“æ•°
        self.partial_conv3 = nn.Conv2d(self.dim_conv3, self.dim_conv3, 3, 1, 1, bias=False)  # 3x3å·ç§¯

        # æ ¹æ®é€‰æ‹©çš„å‰å‘ä¼ æ’­æ–¹å¼åˆå§‹åŒ–
        if forward == 'slicing':
            self.forward = self.forward_slicing
        elif forward == 'split_cat':
            self.forward = self.forward_split_cat
        else:
            raise NotImplementedError

    def forward_slicing(self, x: Tensor) -> Tensor:
        # ä»…ç”¨äºæ¨ç†
        x = x.clone()  # ä¿æŒåŸå§‹è¾“å…¥ä¸å˜ä»¥ä¾¿åç»­æ®‹å·®è¿æ¥
        x[:, :self.dim_conv3, :, :] = self.partial_conv3(x[:, :self.dim_conv3, :, :])  # è¿›è¡Œéƒ¨åˆ†å·ç§¯
        return x

    def forward_split_cat(self, x: Tensor) -> Tensor:
        # ç”¨äºè®­ç»ƒ/æ¨ç†
        x1, x2 = torch.split(x, [self.dim_conv3, self.dim_untouched], dim=1)  # æŒ‰é€šé“åˆ†å‰²
        x1 = self.partial_conv3(x1)  # å¯¹åˆ†å‰²çš„éƒ¨åˆ†è¿›è¡Œå·ç§¯
        x = torch.cat((x1, x2), 1)  # æ‹¼æ¥å›å»
        return x


class MLPBlock(nn.Module):
    """
    MLPå—ï¼ŒåŒ…å«å·ç§¯ã€å½’ä¸€åŒ–å’Œæ¿€æ´»å‡½æ•°ã€‚
    """
    def __init__(self, dim, n_div, mlp_ratio, drop_path, layer_scale_init_value, act_layer, norm_layer, pconv_fw_type):
        super().__init__()
        self.dim = dim
        self.mlp_ratio = mlp_ratio
        self.drop_path = nn.Identity() if drop_path <= 0 else nn.Dropout(drop_path)  # è·³è¿‡è·¯å¾„çš„å¤„ç†
        self.n_div = n_div

        mlp_hidden_dim = int(dim * mlp_ratio)  # MLPéšè—å±‚çš„ç»´åº¦

        # å®šä¹‰MLPå±‚
        mlp_layer: List[nn.Module] = [
            nn.Conv2d(dim, mlp_hidden_dim, 1, bias=False),
            norm_layer(mlp_hidden_dim),
            act_layer(),
            nn.Conv2d(mlp_hidden_dim, dim, 1, bias=False)
        ]
        self.mlp = nn.Sequential(*mlp_layer)  # å°†MLPå±‚ç»„åˆæˆåºåˆ—

        # ç©ºé—´æ··åˆ
        self.spatial_mixing = PartialConv3(dim, n_div, pconv_fw_type)

    def forward(self, x: Tensor) -> Tensor:
        shortcut = x  # ä¿å­˜è¾“å…¥ä»¥ä¾¿è¿›è¡Œæ®‹å·®è¿æ¥
        x = self.spatial_mixing(x)  # è¿›è¡Œç©ºé—´æ··åˆ
        x = shortcut + self.drop_path(self.mlp(x))  # æ®‹å·®è¿æ¥
        return x


class FasterNet(nn.Module):
    """
    FasterNetä¸»ç±»ï¼ŒåŒ…å«å¤šä¸ªé˜¶æ®µå’ŒåµŒå…¥å±‚ã€‚
    """
    def __init__(self, in_chans=3, num_classes=1000, embed_dim=96, depths=(1, 2, 8, 2), mlp_ratio=2., n_div=4,
                 patch_size=4, patch_stride=4, drop_path_rate=0.1, norm_layer=nn.BatchNorm2d, act_layer=nn.ReLU):
        super().__init__()

        self.patch_embed = nn.Conv2d(in_chans, embed_dim, kernel_size=patch_size, stride=patch_stride, bias=False)  # å›¾åƒåˆ†å—åµŒå…¥
        self.stages = nn.ModuleList()  # å­˜å‚¨å„ä¸ªé˜¶æ®µ

        # æ„å»ºå„ä¸ªé˜¶æ®µ
        for i_stage in range(len(depths)):
            stage = MLPBlock(dim=int(embed_dim * 2 ** i_stage), n_div=n_div, mlp_ratio=mlp_ratio, drop_path=drop_path,
                             layer_scale_init_value=0, act_layer=act_layer, norm_layer=norm_layer, pconv_fw_type='split_cat')
            self.stages.append(stage)

    def forward(self, x: Tensor) -> List[Tensor]:
        x = self.patch_embed(x)  # è¿›è¡Œå›¾åƒåµŒå…¥
        outs = []
        for stage in self.stages:
            x = stage(x)  # é€šè¿‡æ¯ä¸ªé˜¶æ®µ
            outs.append(x)  # æ”¶é›†è¾“å‡º
        return outs  # è¿”å›å„é˜¶æ®µçš„è¾“å‡º


# ç”¨äºåŠ è½½æ¨¡å‹çš„å‡½æ•°
def fasternet_t0(weights=None, cfg='path/to/config.yaml'):
    with open(cfg) as f:
        cfg = yaml.load(f, Loader=yaml.SafeLoader)  # åŠ è½½é…ç½®æ–‡ä»¶
    model = FasterNet(**cfg)  # åˆ›å»ºæ¨¡å‹
    if weights is not None:
        pretrain_weight = torch.load(weights, map_location='cpu')  # åŠ è½½é¢„è®­ç»ƒæƒé‡
        model.load_state_dict(pretrain_weight)  # æ›´æ–°æ¨¡å‹æƒé‡
    return model
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š
1. **PartialConv3**ï¼šå®ç°äº†éƒ¨åˆ†å·ç§¯ï¼Œæ”¯æŒä¸¤ç§å‰å‘ä¼ æ’­æ–¹å¼ï¼Œåˆ†åˆ«ç”¨äºæ¨ç†å’Œè®­ç»ƒã€‚
2. **MLPBlock**ï¼šå®ç°äº†ä¸€ä¸ªå¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰å—ï¼ŒåŒ…å«å·ç§¯ã€å½’ä¸€åŒ–å’Œæ¿€æ´»å‡½æ•°ï¼Œå¹¶ä¸”æ”¯æŒæ®‹å·®è¿æ¥ã€‚
3. **FasterNet**ï¼šä¸»ç½‘ç»œç»“æ„ï¼ŒåŒ…å«å¤šä¸ªé˜¶æ®µçš„MLPå—å’Œå›¾åƒåµŒå…¥å±‚ï¼Œèƒ½å¤Ÿå¤„ç†è¾“å…¥å›¾åƒå¹¶è¾“å‡ºç‰¹å¾ã€‚
4. **fasternet_t0**ï¼šç”¨äºåŠ è½½FasterNetæ¨¡å‹çš„å‡½æ•°ï¼Œå¯ä»¥æ ¹æ®é…ç½®æ–‡ä»¶å’Œæƒé‡æ–‡ä»¶åˆå§‹åŒ–æ¨¡å‹ã€‚

è¯¥ç¨‹åºæ–‡ä»¶å®ç°äº†ä¸€ä¸ªåä¸ºFasterNetçš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œä¸»è¦ç”¨äºè®¡ç®—æœºè§†è§‰ä»»åŠ¡ã€‚ç¨‹åºçš„ç»“æ„æ¸…æ™°ï¼ŒåŒ…å«å¤šä¸ªç±»å’Œå‡½æ•°ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½æœ‰å…¶ç‰¹å®šçš„åŠŸèƒ½ã€‚

é¦–å…ˆï¼Œç¨‹åºå¯¼å…¥äº†å¿…è¦çš„åº“ï¼ŒåŒ…æ‹¬PyTorchã€yamlã€ä»¥åŠä¸€äº›ç”¨äºæ„å»ºç¥ç»ç½‘ç»œçš„æ¨¡å—ã€‚æ¥ç€ï¼Œå®šä¹‰äº†ä¸€äº›æ¨¡å‹çš„åŸºæœ¬ç»„ä»¶ï¼Œä¾‹å¦‚Partial_conv3ã€MLPBlockã€BasicStageã€PatchEmbedå’ŒPatchMergingç­‰ã€‚è¿™äº›ç»„ä»¶æ„æˆäº†FasterNetçš„åŸºç¡€ã€‚

Partial_conv3ç±»å®ç°äº†ä¸€ä¸ªéƒ¨åˆ†å·ç§¯æ“ä½œï¼Œæ”¯æŒä¸¤ç§å‰å‘ä¼ æ’­æ–¹å¼ï¼šåˆ‡ç‰‡ï¼ˆslicingï¼‰å’Œæ‹¼æ¥ï¼ˆsplit_catï¼‰ã€‚åœ¨åˆ‡ç‰‡æ¨¡å¼ä¸‹ï¼Œä»…å¯¹è¾“å…¥çš„éƒ¨åˆ†é€šé“è¿›è¡Œå·ç§¯ï¼Œè€Œåœ¨æ‹¼æ¥æ¨¡å¼ä¸‹ï¼Œåˆ™å°†è¾“å…¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«è¿›è¡Œå¤„ç†åå†æ‹¼æ¥ã€‚

MLPBlockç±»å®ç°äº†ä¸€ä¸ªå¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰æ¨¡å—ï¼ŒåŒ…å«äº†å·ç§¯å±‚ã€å½’ä¸€åŒ–å±‚å’Œæ¿€æ´»å‡½æ•°ã€‚å®ƒè¿˜ä½¿ç”¨äº†DropPathæœºåˆ¶æ¥å¢å¼ºæ¨¡å‹çš„é²æ£’æ€§ï¼Œå¹¶æ”¯æŒå¯é€‰çš„å±‚çº§ç¼©æ”¾ã€‚

BasicStageç±»åˆ™ç”±å¤šä¸ªMLPBlockç»„æˆï¼Œæ„æˆäº†æ¨¡å‹çš„ä¸€ä¸ªé˜¶æ®µã€‚PatchEmbedå’ŒPatchMergingç±»ç”¨äºå¤„ç†è¾“å…¥å›¾åƒçš„åˆ†å—å’Œåˆå¹¶ï¼Œå¸®åŠ©æ¨¡å‹åœ¨ä¸åŒçš„å±‚æ¬¡ä¸Šæå–ç‰¹å¾ã€‚

FasterNetç±»æ˜¯æ•´ä¸ªæ¨¡å‹çš„æ ¸å¿ƒï¼Œåˆå§‹åŒ–æ—¶æ¥å—å¤šä¸ªå‚æ•°ï¼ŒåŒ…æ‹¬è¾“å…¥é€šé“æ•°ã€ç±»åˆ«æ•°ã€åµŒå…¥ç»´åº¦ã€æ·±åº¦ç­‰ã€‚å®ƒæ„å»ºäº†æ¨¡å‹çš„å„ä¸ªé˜¶æ®µï¼Œå¹¶ä¸ºæ¯ä¸ªè¾“å‡ºæ·»åŠ äº†å½’ä¸€åŒ–å±‚ã€‚æ¨¡å‹çš„å‰å‘ä¼ æ’­æ–¹æ³•å°†è¾“å…¥å›¾åƒé€šè¿‡å„ä¸ªé˜¶æ®µè¿›è¡Œå¤„ç†ï¼Œå¹¶è¾“å‡ºç‰¹å¾å›¾ã€‚

ç¨‹åºè¿˜å®šä¹‰äº†ä¸€äº›å‡½æ•°ç”¨äºåŠ è½½ä¸åŒé…ç½®çš„FasterNetæ¨¡å‹ï¼ˆå¦‚fasternet_t0ã€fasternet_t1ç­‰ï¼‰ï¼Œå¹¶æ”¯æŒåŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚update_weightå‡½æ•°ç”¨äºæ›´æ–°æ¨¡å‹çš„æƒé‡ï¼Œç¡®ä¿åŠ è½½çš„æƒé‡ä¸æ¨¡å‹ç»“æ„åŒ¹é…ã€‚

æœ€åï¼Œåœ¨ä¸»ç¨‹åºä¸­ï¼Œç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªFasterNetæ¨¡å‹å®ä¾‹ï¼Œå¹¶æ‰“å°å‡ºæ¨¡å‹çš„è¾“å‡ºé€šé“å°ºå¯¸ã€‚ç¨‹åºè¿˜ç”Ÿæˆäº†ä¸€äº›éšæœºè¾“å…¥æ•°æ®ï¼Œå¹¶è¾“å‡ºæ¯ä¸ªé˜¶æ®µçš„ç‰¹å¾å›¾å°ºå¯¸ã€‚

æ•´ä½“è€Œè¨€ï¼Œè¯¥ç¨‹åºæ–‡ä»¶æä¾›äº†ä¸€ä¸ªçµæ´»ä¸”é«˜æ•ˆçš„ç¥ç»ç½‘ç»œæ¶æ„ï¼Œé€‚ç”¨äºå„ç§è®¡ç®—æœºè§†è§‰ä»»åŠ¡ï¼Œå¹¶å…·å¤‡è‰¯å¥½çš„å¯æ‰©å±•æ€§å’Œå¯é…ç½®æ€§ã€‚

#### 11.5 train.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
class DetectionTrainer(BaseTrainer):
    """
    æ‰©å±•è‡ª BaseTrainer ç±»çš„æ£€æµ‹æ¨¡å‹è®­ç»ƒç±»ã€‚
    """

    def build_dataset(self, img_path, mode="train", batch=None):
        """
        æ„å»º YOLO æ•°æ®é›†ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): æ¨¡å¼ï¼Œå¯ä»¥æ˜¯ 'train' æˆ– 'val'ï¼Œç”¨æˆ·å¯ä»¥ä¸ºæ¯ç§æ¨¡å¼è‡ªå®šä¹‰ä¸åŒçš„æ•°æ®å¢å¼ºã€‚
            batch (int, optional): æ‰¹æ¬¡å¤§å°ï¼Œä»…ç”¨äº 'rect' æ¨¡å¼ã€‚é»˜è®¤ä¸º Noneã€‚
        """
        gs = max(int(de_parallel(self.model).stride.max() if self.model else 0), 32)
        return build_yolo_dataset(self.args, img_path, batch, self.data, mode=mode, rect=mode == "val", stride=gs)

    def get_dataloader(self, dataset_path, batch_size=16, rank=0, mode="train"):
        """æ„é€ å¹¶è¿”å›æ•°æ®åŠ è½½å™¨ã€‚"""
        assert mode in ["train", "val"]  # ç¡®ä¿æ¨¡å¼æ˜¯ 'train' æˆ– 'val'
        with torch_distributed_zero_first(rank):  # ä»…åœ¨ DDP æ—¶åˆå§‹åŒ–æ•°æ®é›† *.cache ä¸€æ¬¡
            dataset = self.build_dataset(dataset_path, mode, batch_size)
        shuffle = mode == "train"  # è®­ç»ƒæ¨¡å¼ä¸‹æ‰“ä¹±æ•°æ®
        if getattr(dataset, "rect", False) and shuffle:
            LOGGER.warning("WARNING âš ï¸ 'rect=True' ä¸ DataLoader çš„ shuffle ä¸å…¼å®¹ï¼Œè®¾ç½® shuffle=False")
            shuffle = False
        workers = self.args.workers if mode == "train" else self.args.workers * 2  # æ ¹æ®æ¨¡å¼è®¾ç½®å·¥ä½œçº¿ç¨‹æ•°
        return build_dataloader(dataset, batch_size, workers, shuffle, rank)  # è¿”å›æ•°æ®åŠ è½½å™¨

    def preprocess_batch(self, batch):
        """å¯¹ä¸€æ‰¹å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚"""
        batch["img"] = batch["img"].to(self.device, non_blocking=True).float() / 255  # å°†å›¾åƒè½¬æ¢ä¸ºæµ®ç‚¹æ•°å¹¶å½’ä¸€åŒ–
        if self.args.multi_scale:  # å¦‚æœå¯ç”¨å¤šå°ºåº¦
            imgs = batch["img"]
            sz = (
                random.randrange(self.args.imgsz * 0.5, self.args.imgsz * 1.5 + self.stride)
                // self.stride
                * self.stride
            )  # éšæœºé€‰æ‹©å›¾åƒå¤§å°
            sf = sz / max(imgs.shape[2:])  # è®¡ç®—ç¼©æ”¾å› å­
            if sf != 1:  # å¦‚æœç¼©æ”¾å› å­ä¸ä¸º1
                ns = [
                    math.ceil(x * sf / self.stride) * self.stride for x in imgs.shape[2:]
                ]  # è®¡ç®—æ–°çš„å½¢çŠ¶
                imgs = nn.functional.interpolate(imgs, size=ns, mode="bilinear", align_corners=False)  # è¿›è¡Œæ’å€¼
            batch["img"] = imgs  # æ›´æ–°æ‰¹æ¬¡ä¸­çš„å›¾åƒ
        return batch

    def get_model(self, cfg=None, weights=None, verbose=True):
        """è¿”å› YOLO æ£€æµ‹æ¨¡å‹ã€‚"""
        model = DetectionModel(cfg, nc=self.data["nc"], verbose=verbose and RANK == -1)  # åˆ›å»ºæ£€æµ‹æ¨¡å‹
        if weights:
            model.load(weights)  # åŠ è½½æƒé‡
        return model

    def get_validator(self):
        """è¿”å›ç”¨äº YOLO æ¨¡å‹éªŒè¯çš„ DetectionValidatorã€‚"""
        self.loss_names = "box_loss", "cls_loss", "dfl_loss"  # å®šä¹‰æŸå¤±åç§°
        return yolo.detect.DetectionValidator(
            self.test_loader, save_dir=self.save_dir, args=copy(self.args), _callbacks=self.callbacks
        )

    def plot_training_samples(self, batch, ni):
        """ç»˜åˆ¶å¸¦æœ‰æ³¨é‡Šçš„è®­ç»ƒæ ·æœ¬ã€‚"""
        plot_images(
            images=batch["img"],
            batch_idx=batch["batch_idx"],
            cls=batch["cls"].squeeze(-1),
            bboxes=batch["bboxes"],
            paths=batch["im_file"],
            fname=self.save_dir / f"train_batch{ni}.jpg",
            on_plot=self.on_plot,
        )
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è§£é‡Šï¼š
1. **DetectionTrainer ç±»**ï¼šè¯¥ç±»è´Ÿè´£è®­ç»ƒ YOLO æ£€æµ‹æ¨¡å‹ï¼Œç»§æ‰¿è‡ª `BaseTrainer` ç±»ï¼ŒåŒ…å«æ•°æ®é›†æ„å»ºã€æ•°æ®åŠ è½½ã€å›¾åƒé¢„å¤„ç†ã€æ¨¡å‹è·å–å’ŒéªŒè¯ç­‰åŠŸèƒ½ã€‚

2. **build_dataset æ–¹æ³•**ï¼šæ„å»º YOLO æ•°æ®é›†ï¼Œæ”¯æŒè®­ç»ƒå’ŒéªŒè¯æ¨¡å¼ï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®å¢å¼ºã€‚

3. **get_dataloader æ–¹æ³•**ï¼šæ„é€ æ•°æ®åŠ è½½å™¨ï¼Œç¡®ä¿åœ¨åˆ†å¸ƒå¼è®­ç»ƒæ—¶åªåˆå§‹åŒ–ä¸€æ¬¡æ•°æ®é›†ï¼Œæ”¯æŒæ•°æ®æ‰“ä¹±ã€‚

4. **preprocess_batch æ–¹æ³•**ï¼šå¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å½’ä¸€åŒ–å’Œå¤šå°ºåº¦è°ƒæ•´ã€‚

5. **get_model æ–¹æ³•**ï¼šè¿”å› YOLO æ£€æµ‹æ¨¡å‹ï¼Œå¹¶æ”¯æŒåŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚

6. **get_validator æ–¹æ³•**ï¼šè¿”å›ç”¨äºæ¨¡å‹éªŒè¯çš„æ£€æµ‹éªŒè¯å™¨ï¼Œå®šä¹‰æŸå¤±åç§°ã€‚

7. **plot_training_samples æ–¹æ³•**ï¼šç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ³¨é‡Šï¼Œä¾¿äºå¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `train.py` æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒ YOLOï¼ˆYou Only Look Onceï¼‰ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„ Python è„šæœ¬ï¼Œç»§æ‰¿è‡ª `BaseTrainer` ç±»ã€‚è¯¥æ–‡ä»¶åŒ…å«å¤šä¸ªæ–¹æ³•ï¼Œä¸»è¦ç”¨äºæ„å»ºæ•°æ®é›†ã€åŠ è½½æ•°æ®ã€é¢„å¤„ç†å›¾åƒã€è®¾ç½®æ¨¡å‹å±æ€§ã€è·å–æ¨¡å‹ã€éªŒè¯æ¨¡å‹ã€è®°å½•æŸå¤±ã€æ˜¾ç¤ºè®­ç»ƒè¿›åº¦ã€ç»˜åˆ¶è®­ç»ƒæ ·æœ¬å’Œç»˜åˆ¶è®­ç»ƒæŒ‡æ ‡ç­‰ã€‚

åœ¨ `DetectionTrainer` ç±»ä¸­ï¼Œ`build_dataset` æ–¹æ³•ç”¨äºæ„å»º YOLO æ•°æ®é›†ï¼Œæ¥å—å›¾åƒè·¯å¾„ã€æ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰å’Œæ‰¹é‡å¤§å°ä½œä¸ºå‚æ•°ã€‚å®ƒä½¿ç”¨ `build_yolo_dataset` å‡½æ•°æ¥åˆ›å»ºæ•°æ®é›†ï¼Œå¹¶æ ¹æ®æ¨¡å‹çš„æ­¥å¹…è®¾ç½®å›¾åƒçš„å¤§å°ã€‚

`get_dataloader` æ–¹æ³•ç”¨äºæ„å»ºæ•°æ®åŠ è½½å™¨ï¼Œç¡®ä¿åœ¨åˆ†å¸ƒå¼è®­ç»ƒæ—¶åªåˆå§‹åŒ–ä¸€æ¬¡æ•°æ®é›†ã€‚å®ƒæ ¹æ®æ¨¡å¼å†³å®šæ˜¯å¦æ‰“ä¹±æ•°æ®ï¼Œå¹¶è®¾ç½®å·¥ä½œçº¿ç¨‹çš„æ•°é‡ã€‚

`preprocess_batch` æ–¹æ³•è´Ÿè´£å¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å°†å›¾åƒç¼©æ”¾åˆ°åˆé€‚çš„å¤§å°å¹¶è½¬æ¢ä¸ºæµ®ç‚¹æ•°æ ¼å¼ã€‚è¯¥æ–¹æ³•è¿˜æ”¯æŒå¤šå°ºåº¦è®­ç»ƒï¼Œé€šè¿‡éšæœºé€‰æ‹©å›¾åƒå¤§å°æ¥å¢å¼ºæ¨¡å‹çš„é²æ£’æ€§ã€‚

`set_model_attributes` æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œç±»åˆ«åç§°ã€‚è¿™äº›å±æ€§å°†å¸®åŠ©æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è¿›è¡Œæ›´å¥½çš„å­¦ä¹ ã€‚

`get_model` æ–¹æ³•è¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹ï¼Œæ”¯æŒåŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚

`get_validator` æ–¹æ³•è¿”å›ä¸€ä¸ªç”¨äºéªŒè¯ YOLO æ¨¡å‹çš„éªŒè¯å™¨ï¼Œè®°å½•æŸå¤±åç§°ä»¥ä¾¿åç»­åˆ†æã€‚

`label_loss_items` æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«è®­ç»ƒæŸå¤±é¡¹çš„å­—å…¸ï¼Œä¾¿äºç›‘æ§è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŸå¤±å˜åŒ–ã€‚

`progress_string` æ–¹æ³•ç”Ÿæˆä¸€ä¸ªæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œæ˜¾ç¤ºè®­ç»ƒè¿›åº¦ï¼ŒåŒ…æ‹¬å½“å‰çš„è½®æ¬¡ã€GPU å†…å­˜ä½¿ç”¨æƒ…å†µã€æŸå¤±å€¼ã€å®ä¾‹æ•°é‡å’Œå›¾åƒå¤§å°ã€‚

`plot_training_samples` æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ ‡æ³¨ï¼Œä¾¿äºå¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ•°æ®ã€‚

æœ€åï¼Œ`plot_metrics` å’Œ `plot_training_labels` æ–¹æ³•åˆ†åˆ«ç”¨äºç»˜åˆ¶è®­ç»ƒæŒ‡æ ‡å’Œåˆ›å»ºå¸¦æ ‡ç­¾çš„è®­ç»ƒå›¾ï¼Œä»¥ä¾¿äºåˆ†ææ¨¡å‹çš„æ€§èƒ½å’Œè®­ç»ƒæ•ˆæœã€‚

æ€»ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„æ¡†æ¶ï¼Œç”¨äºè®­ç»ƒ YOLO æ¨¡å‹ï¼Œæ”¯æŒå¤šç§åŠŸèƒ½ä»¥æå‡è®­ç»ƒçš„æ•ˆç‡å’Œå¯è§†åŒ–æ•ˆæœã€‚

#### 11.6 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\callbacks\neptune.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼Œä¸»è¦ç”¨äºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è®°å½•å®éªŒæ•°æ®åˆ° NeptuneAIï¼š

```python
# å¯¼å…¥å¿…è¦çš„åº“
from ultralytics.utils import LOGGER, SETTINGS, TESTS_RUNNING

# å°è¯•å¯¼å…¥ NeptuneAI ç›¸å…³åº“å¹¶è¿›è¡Œåˆå§‹åŒ–
try:
    assert not TESTS_RUNNING  # ç¡®ä¿ä¸åœ¨æµ‹è¯•æ¨¡å¼ä¸‹
    assert SETTINGS['neptune'] is True  # ç¡®ä¿ Neptune é›†æˆå·²å¯ç”¨
    import neptune
    from neptune.types import File

    assert hasattr(neptune, '__version__')  # ç¡®ä¿ Neptune ç‰ˆæœ¬å¯ç”¨

    run = None  # NeptuneAI å®éªŒè®°å½•å®ä¾‹

except (ImportError, AssertionError):
    neptune = None  # å¦‚æœå¯¼å…¥å¤±è´¥ï¼Œåˆ™å°† neptune è®¾ç½®ä¸º None

def _log_scalars(scalars, step=0):
    """å°†æ ‡é‡æ•°æ®è®°å½•åˆ° NeptuneAI å®éªŒè®°å½•å™¨ä¸­ã€‚"""
    if run:  # å¦‚æœ run å®ä¾‹å­˜åœ¨
        for k, v in scalars.items():  # éå†æ ‡é‡å­—å…¸
            run[k].append(value=v, step=step)  # è®°å½•æ¯ä¸ªæ ‡é‡

def _log_images(imgs_dict, group=''):
    """å°†å›¾åƒè®°å½•åˆ° NeptuneAI å®éªŒè®°å½•å™¨ä¸­ã€‚"""
    if run:  # å¦‚æœ run å®ä¾‹å­˜åœ¨
        for k, v in imgs_dict.items():  # éå†å›¾åƒå­—å…¸
            run[f'{group}/{k}'].upload(File(v))  # ä¸Šä¼ æ¯ä¸ªå›¾åƒ

def on_pretrain_routine_start(trainer):
    """åœ¨è®­ç»ƒä¾‹ç¨‹å¼€å§‹å‰è°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚"""
    try:
        global run
        # åˆå§‹åŒ– Neptune è¿è¡Œ
        run = neptune.init_run(project=trainer.args.project or 'YOLOv8', name=trainer.args.name, tags=['YOLOv8'])
        # è®°å½•è¶…å‚æ•°é…ç½®
        run['Configuration/Hyperparameters'] = {k: '' if v is None else v for k, v in vars(trainer.args).items()}
    except Exception as e:
        LOGGER.warning(f'WARNING âš ï¸ NeptuneAI å®‰è£…ä½†æœªæ­£ç¡®åˆå§‹åŒ–ï¼Œæœªè®°å½•æ­¤è¿è¡Œã€‚ {e}')

def on_train_epoch_end(trainer):
    """æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶è°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚"""
    _log_scalars(trainer.label_loss_items(trainer.tloss, prefix='train'), trainer.epoch + 1)  # è®°å½•è®­ç»ƒæŸå¤±
    _log_scalars(trainer.lr, trainer.epoch + 1)  # è®°å½•å­¦ä¹ ç‡
    if trainer.epoch == 1:  # å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªå‘¨æœŸ
        # è®°å½•è®­ç»ƒæ‰¹æ¬¡å›¾åƒ
        _log_images({f.stem: str(f) for f in trainer.save_dir.glob('train_batch*.jpg')}, 'Mosaic')

def on_train_end(trainer):
    """è®­ç»ƒç»“æŸæ—¶è°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚"""
    if run:  # å¦‚æœ run å®ä¾‹å­˜åœ¨
        # è®°å½•æœ€ç»ˆç»“æœã€æ··æ·†çŸ©é˜µå’Œ PR å›¾
        files = [
            'results.png', 'confusion_matrix.png', 'confusion_matrix_normalized.png',
            *(f'{x}_curve.png' for x in ('F1', 'PR', 'P', 'R'))]
        files = [(trainer.save_dir / f) for f in files if (trainer.save_dir / f).exists()]  # è¿‡æ»¤å­˜åœ¨çš„æ–‡ä»¶
        for f in files:
            _log_plot(title=f.stem, plot_path=f)  # è®°å½•æ¯ä¸ªå›¾çš„è·¯å¾„
        # è®°å½•æœ€ç»ˆæ¨¡å‹
        run[f'weights/{trainer.args.name or trainer.args.task}/{str(trainer.best.name)}'].upload(File(str(trainer.best)))

# å®šä¹‰å›è°ƒå‡½æ•°å­—å…¸ï¼Œå¦‚æœ neptune å¯ç”¨åˆ™æ·»åŠ å›è°ƒ
callbacks = {
    'on_pretrain_routine_start': on_pretrain_routine_start,
    'on_train_epoch_end': on_train_epoch_end,
    'on_train_end': on_train_end
} if neptune else {}
```

### ä»£ç è¯´æ˜ï¼š
1. **NeptuneAI åˆå§‹åŒ–**ï¼šå°è¯•å¯¼å…¥å¹¶åˆå§‹åŒ– NeptuneAIï¼Œå¦‚æœå¤±è´¥åˆ™ä¸è®°å½•ä»»ä½•ä¿¡æ¯ã€‚
2. **è®°å½•å‡½æ•°**ï¼šå®šä¹‰äº† `_log_scalars` å’Œ `_log_images` å‡½æ•°ç”¨äºè®°å½•æ ‡é‡å’Œå›¾åƒæ•°æ®ã€‚
3. **å›è°ƒå‡½æ•°**ï¼š
   - `on_pretrain_routine_start`ï¼šåœ¨è®­ç»ƒå¼€å§‹å‰åˆå§‹åŒ– Neptune è®°å½•ï¼Œå¹¶è®°å½•è¶…å‚æ•°ã€‚
   - `on_train_epoch_end`ï¼šåœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶è®°å½•æŸå¤±å’Œå­¦ä¹ ç‡ï¼Œå¹¶åœ¨ç¬¬ä¸€ä¸ªå‘¨æœŸè®°å½•è®­ç»ƒå›¾åƒã€‚
   - `on_train_end`ï¼šåœ¨è®­ç»ƒç»“æŸæ—¶è®°å½•æœ€ç»ˆç»“æœå’Œæ¨¡å‹æ–‡ä»¶ã€‚

### é‡è¦æ€§ï¼š
è¿™äº›ä»£ç æ®µæ˜¯ç”¨äºè®­ç»ƒè¿‡ç¨‹ä¸­çš„æ•°æ®è®°å½•å’Œç›‘æ§ï¼Œå¸®åŠ©ç”¨æˆ·åˆ†ææ¨¡å‹æ€§èƒ½å’Œè®­ç»ƒè¿›åº¦ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ç”¨äºé›†æˆNeptuneAIçš„YOLOv8è®­ç»ƒè¿‡ç¨‹ä¸­çš„å›è°ƒå‡½æ•°ï¼Œä¸»è¦åŠŸèƒ½æ˜¯è®°å½•å’Œä¸Šä¼ è®­ç»ƒè¿‡ç¨‹ä¸­çš„å„ç§ä¿¡æ¯åˆ°NeptuneAIå®éªŒæ—¥å¿—ä¸­ã€‚é¦–å…ˆï¼Œæ–‡ä»¶å¯¼å…¥äº†å¿…è¦çš„åº“å’Œæ¨¡å—ï¼Œå¹¶è¿›è¡Œäº†ä¸€äº›åŸºæœ¬çš„é”™è¯¯å¤„ç†ï¼Œä»¥ç¡®ä¿åœ¨ä¸è¿›è¡Œæµ‹è¯•æ—¶å¯ä»¥æ­£å¸¸ä½¿ç”¨NeptuneAIã€‚å¦‚æœNeptuneAIæœªæ­£ç¡®å®‰è£…æˆ–æœªå¯ç”¨ï¼Œåˆ™ç›¸å…³åŠŸèƒ½å°†ä¸ä¼šæ‰§è¡Œã€‚

æ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€äº›ç§æœ‰å‡½æ•°ï¼Œç”¨äºè®°å½•æ ‡é‡æ•°æ®ã€å›¾åƒå’Œç»˜å›¾ã€‚`_log_scalars`å‡½æ•°ç”¨äºå°†æ ‡é‡æ•°æ®ï¼ˆå¦‚æŸå¤±å€¼å’Œå­¦ä¹ ç‡ï¼‰è®°å½•åˆ°Neptuneä¸­ï¼Œ`_log_images`å‡½æ•°ç”¨äºä¸Šä¼ è®­ç»ƒè¿‡ç¨‹ä¸­ç”Ÿæˆçš„å›¾åƒï¼Œè€Œ`_log_plot`å‡½æ•°åˆ™ç”¨äºä¸Šä¼ ç»˜åˆ¶çš„å›¾å½¢ï¼Œæ”¯æŒä»¥æ ‡é¢˜å’Œè·¯å¾„çš„å½¢å¼è®°å½•å›¾åƒã€‚

æ¥ä¸‹æ¥ï¼Œæ–‡ä»¶å®šä¹‰äº†ä¸€äº›å›è°ƒå‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¼šåœ¨è®­ç»ƒçš„ä¸åŒé˜¶æ®µè¢«è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œ`on_pretrain_routine_start`å‡½æ•°åœ¨è®­ç»ƒå¼€å§‹å‰è¢«è°ƒç”¨ï¼Œç”¨äºåˆå§‹åŒ–Neptuneçš„è¿è¡Œå®ä¾‹å¹¶è®°å½•è¶…å‚æ•°é…ç½®ã€‚`on_train_epoch_end`å‡½æ•°åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶è¢«è°ƒç”¨ï¼Œè®°å½•è®­ç»ƒæŸå¤±å’Œå­¦ä¹ ç‡ï¼Œå¹¶åœ¨ç¬¬ä¸€ä¸ªå‘¨æœŸç»“æŸæ—¶ä¸Šä¼ è®­ç»ƒå›¾åƒã€‚`on_fit_epoch_end`å‡½æ•°åœ¨æ¯ä¸ªè®­ç»ƒå’ŒéªŒè¯å‘¨æœŸç»“æŸæ—¶è¢«è°ƒç”¨ï¼Œè®°å½•æ¨¡å‹çš„ç›¸å…³ä¿¡æ¯å’ŒæŒ‡æ ‡ã€‚`on_val_end`å‡½æ•°åœ¨éªŒè¯ç»“æŸæ—¶è¢«è°ƒç”¨ï¼Œä¸Šä¼ éªŒè¯ç»“æœçš„å›¾åƒã€‚æœ€åï¼Œ`on_train_end`å‡½æ•°åœ¨è®­ç»ƒç»“æŸæ—¶è¢«è°ƒç”¨ï¼Œè®°å½•æœ€ç»ˆçš„ç»“æœã€æ··æ·†çŸ©é˜µå’Œå…¶ä»–æ€§èƒ½æ›²çº¿ï¼Œå¹¶ä¸Šä¼ æœ€ä½³æ¨¡å‹çš„æƒé‡ã€‚

æœ€åï¼Œæ–‡ä»¶é€šè¿‡ä¸€ä¸ªå­—å…¸å°†è¿™äº›å›è°ƒå‡½æ•°ç»„ç»‡èµ·æ¥ï¼Œä»¥ä¾¿åœ¨Neptuneå¯ç”¨æ—¶è¿›è¡Œè°ƒç”¨ã€‚è¿™ç§ç»“æ„ä½¿å¾—ä»£ç åœ¨ä½¿ç”¨Neptuneè¿›è¡Œå®éªŒç®¡ç†æ—¶æ›´åŠ çµæ´»å’Œæ¨¡å—åŒ–ã€‚æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºYOLOv8æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹æä¾›å¯è§†åŒ–å’Œè®°å½•åŠŸèƒ½ï¼Œä»¥ä¾¿äºåç»­çš„åˆ†æå’Œè°ƒè¯•ã€‚

### 12.ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆèŠ‚é€‰ï¼‰

### æ•´ä½“åŠŸèƒ½å’Œæ„æ¶æ¦‚æ‹¬

è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªYOLOv8ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„å®ç°ä¸è®­ç»ƒæ¡†æ¶ï¼ŒåŒ…å«å¤šä¸ªæ¨¡å—å’Œå·¥å…·ï¼Œæ—¨åœ¨æä¾›çµæ´»çš„è®­ç»ƒã€è°ƒä¼˜å’Œè¯„ä¼°åŠŸèƒ½ã€‚æ•´ä½“æ¶æ„ç”±æ•°æ®åŠ è½½ã€æ¨¡å‹å®šä¹‰ã€è®­ç»ƒè¿‡ç¨‹ç®¡ç†ã€è¶…å‚æ•°è°ƒä¼˜ã€å¯è§†åŒ–å’Œå›è°ƒæœºåˆ¶ç­‰å¤šä¸ªéƒ¨åˆ†ç»„æˆã€‚ä»¥ä¸‹æ˜¯å„ä¸ªæ¨¡å—çš„ä¸»è¦åŠŸèƒ½ï¼š

- **æ•°æ®åŠ è½½**ï¼šé€šè¿‡`loaders.py`æ¨¡å—ï¼Œæ”¯æŒä»å¤šç§æ•°æ®æºï¼ˆå¦‚è§†é¢‘æµã€å›¾åƒæ–‡ä»¶ã€å±å¹•æˆªå›¾ç­‰ï¼‰åŠ è½½æ•°æ®ï¼Œæ–¹ä¾¿è¿›è¡Œç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚
- **æ¨¡å‹å®šä¹‰**ï¼šåœ¨`fasternet.py`å’Œ`model.py`ä¸­å®šä¹‰äº†YOLOv8åŠå…¶å˜ç§çš„æ¨¡å‹æ¶æ„ï¼Œæ”¯æŒå¤šç§é…ç½®å’Œé¢„è®­ç»ƒæƒé‡çš„åŠ è½½ã€‚
- **è®­ç»ƒç®¡ç†**ï¼š`train.py`è´Ÿè´£è®­ç»ƒè¿‡ç¨‹çš„æ§åˆ¶ï¼ŒåŒ…æ‹¬æ•°æ®é¢„å¤„ç†ã€æ¨¡å‹è®­ç»ƒã€æŸå¤±è®°å½•å’Œè®­ç»ƒè¿›åº¦å¯è§†åŒ–ã€‚
- **è¶…å‚æ•°è°ƒä¼˜**ï¼š`tuner.py`æä¾›äº†è¶…å‚æ•°è°ƒä¼˜çš„åŠŸèƒ½ï¼Œåˆ©ç”¨Ray Tuneåº“æ¥ä¼˜åŒ–æ¨¡å‹æ€§èƒ½ã€‚
- **å¯è§†åŒ–ä¸å›è°ƒ**ï¼š`neptune.py`é›†æˆäº†NeptuneAIï¼Œç”¨äºè®°å½•è®­ç»ƒè¿‡ç¨‹ä¸­çš„å„ç§æŒ‡æ ‡å’Œç»“æœï¼Œä¾¿äºåç»­åˆ†æå’Œå¯è§†åŒ–ã€‚
- **ç”¨æˆ·ç•Œé¢**ï¼š`ui.py`æä¾›äº†ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç•Œé¢ï¼Œç”¨äºå¯åŠ¨è®­ç»ƒè„šæœ¬ã€‚

### æ–‡ä»¶åŠŸèƒ½æ•´ç†è¡¨

| æ–‡ä»¶è·¯å¾„                                                                                          | åŠŸèƒ½æè¿°                                                         |
|---------------------------------------------------------------------------------------------------|------------------------------------------------------------------|
| `code\ultralytics\data\loaders.py`                                                               | æ•°æ®åŠ è½½å™¨ï¼Œæ”¯æŒä»å¤šç§è¾“å…¥æºåŠ è½½æ•°æ®ï¼ˆè§†é¢‘ã€å›¾åƒã€æˆªå›¾ç­‰ï¼‰ã€‚     |
| `ui.py`                                                                                           | æä¾›ç”¨æˆ·ç•Œé¢ï¼Œè¿è¡ŒæŒ‡å®šçš„è®­ç»ƒè„šæœ¬ï¼ˆå¦‚`web.py`ï¼‰ã€‚                |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\tuner.py`           | è¶…å‚æ•°è°ƒä¼˜å·¥å…·ï¼Œä½¿ç”¨Ray Tuneä¼˜åŒ–YOLOæ¨¡å‹çš„è®­ç»ƒé…ç½®ã€‚            |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\backbone\fasternet.py` | å®šä¹‰FasterNetæ¨¡å‹æ¶æ„ï¼Œæ”¯æŒYOLOv8çš„å¤šç§å˜ä½“ã€‚                   |
| `train.py`                                                                                       | è®­ç»ƒç®¡ç†è„šæœ¬ï¼Œæ§åˆ¶è®­ç»ƒè¿‡ç¨‹ã€æ•°æ®é¢„å¤„ç†å’ŒæŸå¤±è®°å½•ã€‚               |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\callbacks\neptune.py` | é›†æˆNeptuneAIï¼Œè®°å½•è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡å’Œç»“æœï¼Œæ”¯æŒå¯è§†åŒ–ã€‚         |
| `code\ultralytics\assets\__init__.py`                                                           | åˆå§‹åŒ–æ–‡ä»¶ï¼Œå¯èƒ½ç”¨äºç»„ç»‡å’Œç®¡ç†é¡¹ç›®çš„èµ„æºå’Œèµ„äº§ã€‚                |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\yolo\__init__.py` | åˆå§‹åŒ–YOLOæ¨¡å‹æ¨¡å—ï¼Œç»„ç»‡YOLOç›¸å…³çš„æ¨¡å‹å®šä¹‰ã€‚                    |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\solutions\__init__.py`   | åˆå§‹åŒ–è§£å†³æ–¹æ¡ˆæ¨¡å—ï¼Œå¯èƒ½ç”¨äºç®¡ç†ä¸åŒçš„è§£å†³æ–¹æ¡ˆæˆ–åŠŸèƒ½ã€‚          |
| `code\ultralytics\models\yolo\model.py`                                                         | å®šä¹‰YOLOæ¨¡å‹çš„æ ¸å¿ƒç»“æ„å’ŒåŠŸèƒ½ï¼ŒåŒ…æ‹¬å‰å‘ä¼ æ’­å’ŒæŸå¤±è®¡ç®—ã€‚           |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\engine\results.py`        | å¤„ç†æ¨¡å‹çš„è¾“å‡ºç»“æœï¼Œæ”¯æŒç»“æœçš„åå¤„ç†å’Œè¯„ä¼°ã€‚                    |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\yolo\detect\__init__.py` | åˆå§‹åŒ–æ£€æµ‹æ¨¡å—ï¼Œå¯èƒ½ç”¨äºç›®æ ‡æ£€æµ‹ç›¸å…³çš„åŠŸèƒ½å’Œæ–¹æ³•ã€‚              |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\fastsam\predict.py` | å®ç°FastSAMæ¨¡å‹çš„é¢„æµ‹åŠŸèƒ½ï¼Œæ”¯æŒå¿«é€Ÿçš„ç›®æ ‡æ£€æµ‹å’Œåˆ†å‰²ã€‚           |

è¿™ä¸ªè¡¨æ ¼æ€»ç»“äº†æ¯ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½ï¼Œå¸®åŠ©ç†è§£æ•´ä¸ªé¡¹ç›®çš„ç»“æ„å’Œå„ä¸ªæ¨¡å—ä¹‹é—´çš„å…³ç³»ã€‚

æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰â€ä¸­éƒ¨åˆ†ä»£ç å¯èƒ½ä¼šä¼˜åŒ–å‡çº§ï¼Œä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œå®Œæ•´â€œè®­ç»ƒæºç â€ã€â€œWebå‰ç«¯ç•Œé¢â€å’Œâ€œ70+ç§åˆ›æ–°ç‚¹æºç â€ä»¥â€œ13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–â€çš„å†…å®¹ä¸ºå‡†ã€‚

### 13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–

![19.png](19.png)


# [ä¸‹è½½é“¾æ¥ï¼šhttps://mbd.pub/o/bread/ZpuZl5pq](https://mbd.pub/o/bread/ZpuZl5pq)